/*!
built in 2017-7-12:11:2 version 2.2.9 by 司徒正美
https://github.com/RubyLouvre/avalon/tree/2.2.9
修复ms-for循环生成option与ms-deplex的联动问题
解决 IE8 html 属性中的中文被转成 unicode 字符串问题 
修复多个计算属性不更新的问题

*/(function(G,ba){"object"===typeof exports&&"undefined"!==typeof module?module.exports=ba():"function"===typeof define&&define.amd?define(ba):G.avalon=ba()})(this,function(){function G(a){this.size=0;this.limit=a;this.head=this.tail=void 0;this._keymap={}}function ba(a){for(var b in wb)if("ms-"+b in a)return!0}function e(a){return new e.init(a)}function ya(a,b){for(var c in b)a[c]=b[c];return a}function K(a,b){"string"===typeof a&&(a=a.match(za)||[]);for(var c={},d=void 0!==b?b:1,f=0,e=a.length;f<e;f++)c[a[f]]=d;return c}function Q(a){return null!==a&&"object"===typeof a}function Aa(a){return String(Math.random()+Math.random()).replace($c,a||"avalon")}function C(a){return a.uuid||(a.uuid="_"+ ++ad)}function Ba(a){return(a+"").replace(bd,"\\$\x26")}function u(a){for(var b in a){var c=a[b];if("function"===typeof u.plugins[b])u.plugins[b](c);else u[b]=c}return this}function R(a){return/\[native code\]/.test(a)}function ca(a,b,c){a="for(var "+a+"i\x3d0,n \x3d this.length; i \x3c n; i++){"+b.replace("_","((i in this) \x26\x26 fn.call(scope,this[i],i,this))")+"}"+c;return Function("fn,scope",a)}function cd(a){return a?a==a.document&&a.document!=a:!1}function xb(a){return dd.test(S.call(a))}function ed(a,b){if(!a||"object"!==e.type(a)||a.nodeType||e.isWindow(a))return!1;try{if(a.constructor&&!L.call(a,"constructor")&&!L.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(yb)for(b in a)return L.call(a,b);for(b in a);return b===zb||L.call(a,b)}function fd(a){return"[object Object]"===S.call(a)&&Object.getPrototypeOf(a)===Object.prototype}function Ab(a,b){for(var c=b[0],d,f,h,g=1,k=b.length;g<k;g++){var l=b[g],n=Array.isArray(l);for(h in l)if(!n||l.hasOwnProperty(h)){try{var r=c[h],q=l[h]}catch(m){continue}c!==q&&(a&&q&&(e.isPlainObject(q)||(d=Array.isArray(q)))?(d?(d=!1,f=r&&Array.isArray(r)?r:[]):f=r&&e.isPlainObject(r)?r:{},c[h]=Ab(a,[f,q])):q!==zb&&(c[h]=q))}}return c}function gd(a){if(!a)return!1;var b=a.length;if(b===b>>>0){b=S.call(a);if(hd.test(b))return!0;if("[object Object]"!==b)return!1;try{return!1==={}.propertyIsEnumerable.call(a,"length")?Bb.test(a.item||a.callee):!0}catch(c){return!a.window}}return!1}function id(a,b){var c=Math.pow(10,b);return""+(Math.round(a*c)/c).toFixed(b)}function Cb(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");a=isFinite(+a)?+a:0;b=isFinite(+b)?Math.abs(b):3;d="string"===typeof d?d:",";c=c||".";var f="",f=(b?id(a,b):""+Math.round(a)).split(".");3<f[0].length&&(f[0]=f[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,d));return f.join(c)}function D(a){return parseInt(a,10)||0}function Ca(a,b,c){var d="";0>a&&(d="-",a=-a);for(a=""+a;a.length<b;)a="0"+a;c&&(a=a.substr(a.length-b));return d+a}function v(a,b,c,d){return function(f){f=f["get"+a]();if(0<c||f>-c)f+=c;0===f&&-12===c&&(f=12);return Ca(f,b,d)}}function ia(a,b){return function(c,d){var f=c["get"+a](),e=(b?"SHORT"+a:a).toUpperCase();return d[e][f]}}function Da(a,b){var c=Da.locate,d="",f=[],e,g;b=b||"mediumDate";b=c[b]||b;if("string"===typeof a)if(/^\d+$/.test(a))a=D(a);else if(jd.test(a))a=+RegExp.$1;else{g=a.trim();var k=[0,0,0,0,0,0,0],l=new Date(0);g=g.replace(/^(\d+)\D(\d+)\D(\d+)/,function(a,b,c,d){a=4===d.length?[d,b,c]:[b,c,d];k[0]=D(a[0]);k[1]=D(a[1])-1;k[2]=D(a[2]);return""});var n=l.setFullYear,r=l.setHours;g=g.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(a,b,c,d,f){k[3]=D(b);k[4]=D(c);k[5]=D(d);f&&(k[6]=Math.round(1E3*parseFloat("0."+f)));return""});var q=0,m=0;g=g.replace(/Z|([+-])(\d\d):?(\d\d)/,function(a,b,c,d){n=l.setUTCFullYear;r=l.setUTCHours;b&&(q=D(b+c),m=D(b+d));return""});k[3]-=q;k[4]-=m;n.apply(l,k.slice(0,3));r.apply(l,k.slice(3));a=l}for("number"===typeof a&&(a=new Date(a));b;)(g=kd.exec(b))?(f=f.concat(g.slice(1)),b=f.pop()):(f.push(b),b=null);f.forEach(function(b){e=ld[b];d+=e?e(a,c):b.replace(/(^'|'$)/g,"").replace(/''/g,"'")});return d}function Ea(a,b,c){if(b)a.forEach(function(a,b){c(b)});else if("string"===typeof a.$track)a.$track.replace(/[^\u2625]+/g,function(a){c(a)});else for(var d in a)a.hasOwnProperty(d)&&c(d)}function Fa(a,b,c){for(var d=0,f=b.length;d<f;d++)c(b[d]);return a}function md(a,b){var c=[],d=0;Ea(a,b,function(b){c[d]={oldIndex:d,value:a[b],key:b};d++});return c}function Db(a){return null==a?"":String(a).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26#39;")}function Eb(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function nd(a){var b=a.cloneNode(!0),c=Eb(b);a=Eb(a);for(var d=0;d<a.length;d++){var f=c[d],h=a[d];if(1===f.nodeType){var g=f.nodeName.toLowerCase();if("script"===g)f.text!==h.text&&(f.type="noexec",f.text=h.text,f.type=h.type||"");else if("object"===g){if(h=h.childNodes,f.childNodes.length!==h.length){e.clearHTML(f);for(var g=0,k=void 0;k=h[g++];)f.appendChild(k.cloneNode(!0))}}else if("input"===g&&Ga.test(h.nodeName))f.defaultChecked=f.checked=h.checked,f.value!==h.value&&(f.value=h.value);else if("option"===g)f.defaultSelected=f.selected=h.defaultSelected;else if("input"===g||"textarea"===g)f.defaultValue=h.defaultValue}}return b}function Ha(a,b){try{for(;b=b.parentNode;)if(b===a)return!0}catch(c){}return!1}function od(){function a(a,c){a in E||!HTMLElement.prototype.__defineGetter__||HTMLElement.prototype.__defineGetter__(a,c)}10>A&&(e.cloneNode=nd);m.contains||(m.contains=function(a){return Ha(m,a)});e.modern&&!m.createTextNode("x").contains&&(Node.prototype.contains=function(a){return Ha(this,a)});a("outerHTML",function(){var a=m.createElement("div");a.appendChild(this);return a.innerHTML});a("children",function(){for(var a=[],c=0,d;d=this.childNodes[c++];)1===d.nodeType&&a.push(d);return a});a("innerText",function(){return this.textContent})}function Fb(a){this.node=a}function Gb(a){"classList"in a||(a.classList=new Fb(a));return a.classList}function pd(a){if("string"===typeof a){if((a=a.trim())&&qd.test(a.replace(rd,"@").replace(sd,"]").replace(td,"")))return(new Function("return "+a))();throw TypeError("Invalid JSON: ["+a+"]");}return a}function Hb(a,b){if(0>=a.offsetWidth){if(ud.test(t["@:get"](a,"display"))){var c={node:a},d;for(d in Ib)c[d]=a.style[d],a.style[d]=Ib[d];b.push(c)}(c=a.parentNode)&&1===c.nodeType&&Hb(c,b)}}function vd(a){if(a.hasAttribute&&a.hasAttribute("value"))return a.getAttribute("value");var b=a.getAttributeNode("value");return b&&b.specified?b.value:a.innerHTML.trim()}function M(a){return K(a+",template,#document-fragment,#comment")}function da(a){var b=Jb.get(a);if(b)return e.mix(!0,[],b);var b=!1,b=void 0===b||!0===b,c=wd(a,b),b=b?"string"===typeof c[0]?c[1]:c[0]:c;Jb.put(a,e.mix(!0,[],b));return b}function wd(a,b){function c(a){var b=f.last();b&&b.children?b.children.push(a):k.push(a)}var d=9990,f=[],e=a,g=a.length;f.last=function(){return f[f.length-1]};var k=[],l;do{if(0===--d)break;var n=xd(a);if(n){a=a.replace(n[0],"");l=f.pop();if(!l)throw"\u662f\u4e0d\u662f\u6709\u5c5e\u6027\u503c\u6ca1\u6709\u7528\u5f15\u53f7\u62ec\u8d77";"option"===l.nodeName?l.children=[{nodeName:"#text",nodeValue:Kb(l)}]:"table"===l.nodeName&&yd(l.children);l=null;if(b&&1===k.length&&!f.length)return[e.slice(0,g-a.length),k[0]]}else if(n=zd(a)){if(a=a.replace(n[0],""),l=n[1],c(l),(n=!(!l.isVoidTag&&!Lb[l.nodeName]))||f.push(l),b&&n&&!f.length)return[e.slice(0,g-a.length),l]}else{n="";do if(0===a.indexOf("\x3c"))n+=a.slice(0,1),a=a.slice(1);else break;while(a.length);var r=a.indexOf("\x3c");if(-1===r)n=a,a="";else{var q=a.indexOf(u.openTag);-1!==q&&q<r?(0!==q&&(n+=a.slice(0,q)),r=a.slice(q),q=Ad(r),n+=q,a=r.slice(q.length)):(n+=a.slice(0,r),a=a.slice(r))}(n=Bd(l,n,c))&&(l=n)}}while(a.length);return k}function Bd(a,b,c){if(Mb.test(b))return a&&"#text"===a.nodeName?a.nodeValue+=b:(a={nodeName:"#text",nodeValue:b},c(a)),a}function Ad(a){for(var b=u.closeTag,c=u.openTag,d=b.charAt(0),f=b.length,e="code",g,k,c=c.length,l=a.length;c<l;c++){var n=a.charAt(c);switch(e){case "code":if('"'===n||"'"===n)e="string",g=n;else if(n===d&&a.substr(c,f)===b)return a.slice(0,c+f);break;case "string":"\\"===n&&/"'/.test(a.charAt(c+1))&&(k=!k),n!==g||k||(e="code")}}throw"\u627e\u4e0d\u5230\u754c\u5b9a\u7b26"+b;}function yd(a){for(var b=!1,c=0,d=a.length;c<d;c++){var f=a[c];Cd.test(f.nodeName)?b=!1:"tr"===f.nodeName?b?(a.splice(c,1),b.children.push(f),d--,c--):(b={nodeName:"tbody",props:{},children:[f]},a.splice(c,1,b)):b&&(a.splice(c,1),b.children.push(f),d--,c--)}}function xd(a){if(0===a.indexOf("\x3c/")){var b=a.match(/\<\/(\w+[^\s\/\>]*)>/);if(b){var c=b[1];a.slice(3+c.length);return[b[0],{nodeName:c}]}}return null}function zd(a){if(0===a.indexOf("\x3c")){if(0===a.indexOf("\x3c!--")){var b=a.indexOf("--\x3e");-1===b&&thow("\u6ce8\u91ca\u8282\u70b9\u6ca1\u6709\u95ed\u5408 "+a.slice(0,100));var c={nodeName:"#comment",nodeValue:a.slice(4,b)};return[a.slice(0,b+3),c]}if(c=a.match(Dd)){var b=c[0],d=c[1],c={nodeName:d,props:{},children:[]};a=a.replace(b,"");try{var f;a:{for(var e=a,g="AttrName",k="",l="",n,r,q={},m=0,p=e.length;m<p;m++){var x=e.charAt(m);switch(g){case "AttrName":if("/"===x&&"\x3e"===e.charAt(m+1)||"\x3e"===x){k&&(q[k]=k);f=[e.slice(0,m),q];break a}if(Ed.test(x))k&&(g="AttrEqual");else if("\x3d"===x){if(!k)throw"\u5fc5\u987b\u6307\u5b9a\u5c5e\u6027\u540d";g="AttrQuote"}else k+=x;break;case "AttrEqual":"\x3d"===x?g="AttrQuote":Mb.test(x)&&(q[k]=k,k=x,g="AttrName");break;case "AttrQuote":if('"'===x||"'"===x)n=x,g="AttrValue",r=!1;break;case "AttrValue":"\\"===x&&/"'/.test(e.charAt(m+1))&&(r=!r),"\n"!==x&&(x!==n?l+=x:x!==n||r||(q[k]=l,k=l="",g="AttrName"))}}throw"\u5fc5\u987b\u5173\u95ed\u6807\u7b7e";}}catch(t){}f&&(c.props=f[1],a=a.replace(f[0],""),b+=f[0]);"\x3e"===a.charAt(0)?(b+="\x3e",a=a.slice(1),Nb[c.nodeName]&&(c.isVoidTag=!0)):"/\x3e"===a.slice(0,2)&&(b+="/\x3e",a=a.slice(2),c.isVoidTag=!0);!c.isVoidTag&&Lb[d]&&(f="\x3c/"+d+"\x3e",n=a.indexOf(f),a=a.slice(0,n),b+=a+f,c.children.push({nodeName:"#text",nodeValue:a}),"textarea"===d&&(c.props.type=d,c.props.value=a));return[b,c]}}}function Kb(a){var b="";a.children.forEach(function(a){"#text"===a.nodeName?b+=a.nodeValue:a.children&&!Fd[a.nodeName]&&(b+=Kb(a))});return b}function Ia(a,b){a.setAttribute("avalon-events",b)}function Ob(a,b,c){var d=a.getAttribute("avalon-events");if(d&&(!0!==a.disabled||"click"!==b)){var f=[],h=Pb[b]||(Pb[b]=new RegExp("\\b"+b+"\\:([^,\\s]+)","g"));d.replace(h,function(a,b){f.push(b);return a});f.length&&c.push({elem:a,uuids:f})}a=a.parentNode;d=e.gestureEvents||{};a&&a.getAttribute&&(ja[b]||d[b])&&Ob(a,b,c)}function Ja(a){a=new ka(a);var b=a.type,c=a.target,d=[];Ob(c,b,d);for(var f=0,h,g,k;(k=d[f++])&&!a.cancelBubble;)for(a.currentTarget=k.elem,h=0;(g=k.uuids[h++])&&!a.stopImmediate;){var l=e.eventListeners[g];if(l){if((g=Gd.test(g)?k.elem._ms_context_:0)&&!1===g.$hashcode)return e.unbind(c,b,l);!1===l.call(g||c,a)&&(a.preventDefault(),a.stopPropagation())}}}function Hd(a){var b=E.getAttribute("delegate-events")||"";-1===b.indexOf(a)&&(b=b.match(e.rword)||[],b.push(a),E.setAttribute("delegate-events",b.join(",")),e._nativeBind(E,a,Ja,!!Qb[a]))}function ka(a){if(a.originalEvent)return a;for(var b in a)Rb[b]||(this[b]=a[b]);this.target||(this.target=a.srcElement);this.fixEvent();this.timeStamp=new Date-0;this.originalEvent=a}function T(a){for(e.isReady=!0;a=Sb.shift();)a(e)}function Id(){function a(){try{E.doScroll("left"),T()}catch(b){setTimeout(a)}}if("complete"===m.readyState)setTimeout(T);else if(m.addEventListener)m.addEventListener("DOMContentLoaded",T,!1);else if(m.attachEvent){m.attachEvent("onreadystatechange",function(){"complete"===m.readyState&&T()});try{var b=null===y.frameElement}catch(c){}E.doScroll&&b&&y.external&&a()}e.bind(y,"load",T)}function Tb(a){var b=a.nodeName.toLowerCase();switch(b){case "#text":case "#comment":return{nodeName:b,dom:a,nodeValue:a.nodeValue};default:for(var c=a.attributes||[],d={},f=0,e=c.length;f<e;f++){var g=c[f];g.specified&&(d[g.name.toLowerCase()]=g.value)}Jd.test(a.nodeName)&&(d.type=a.type,(c=a.getAttributeNode("value"))&&/\S/.test(c.value)&&(d.value=c.value));if(c=a.style.cssText)d.style=c;"select-one"===d.type&&(d.selectedIndex=a.selectedIndex);c={nodeName:b,dom:a,isVoidTag:!!Nb[b],props:d};"option"===b&&(d.selected=a.selected);if(Ub[b]||"option"===b){d=a.text||a.innerHTML;switch(b){case "style":case "script":case "noscript":case "template":case "xmp":c.children=[{nodeName:"#text",nodeValue:d}];break;case "textarea":f=c.props;f.type=b;f.value=d;c.children=[{nodeName:"#text",nodeValue:d}];break;case "option":c.children=[{nodeName:"#text",nodeValue:String(d).replace(Kd,"").trim()}]}1===a.childNodes.length&&(c.children[0].dom=a.firstChild)}else if(!c.isVoidTag)for(c.children=[],b=0;d=a.childNodes[b++];)d=Tb(d),/\S/.test(d.nodeValue)&&c.children.push(d);return c}}function Ka(a){this.nodeName="#text";this.nodeValue=a}function La(a){this.nodeName="#comment";this.nodeValue=a}function Ma(a,b,c,d){this.nodeName=a;this.props=b;this.children=c;this.isVoidTag=d}function Ld(a,b,c){switch(b){case "style":a.setAttribute("type","text/css");a.styleSheet.cssText=c;break;case "xmp":case "noscript":a.textContent=c}}function Md(a){31>m.styleSheets.length?m.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)"):m.styleSheets[0].addRule(".rvml","behavior:url(#default#VML)");var b=a.split(":");1===b.length&&b.unshift("v");a=b[1];b=b[0];m.namespaces[b]||m.namespaces.add(b,"urn:schemas-microsoft-com:vml");return m.createElement("\x3c"+b+":"+a+' class\x3d"rvml"\x3e')}function ea(a,b,c,d){this.nodeName="#document-fragment";this.children=a;this.key=b;this.val=c;this.index=d;this.props={}}function Na(){if(!(!0===e.isRunningActions||0<e.inTransaction)){e.isRunningActions=!0;for(var a=e.pendingActions.splice(0,e.pendingActions.length),b=0,c;c=a[b++];)c.update(),delete e.uniqActions[c.uuid];e.isRunningActions=!1}}function Vb(a,b){if(a.observers){var c=e.trackingAction;c&&Wb.push(c);e.trackingAction=a;e.track("\u3010action\u3011",a.type,a.expr,"\u5f00\u59cb\u5f81\u6536\u4f9d\u8d56\u9879");a.mapIDs={};var d=!0,f;try{f=b.call(a),d=!1}finally{if(d)e.warn("collectDeps fail",b+""),a.mapIDs={},e.trackingAction=c;else{e.trackingAction=Wb.pop();try{var h=a.observers,d=[],c={},g=[],k;for(k in a.mapIDs){var l=a.mapIDs[k];l.isAction||(l.observers?(g.push(l.uuid),d.push(l),c[l.uuid]=1,l.lastAccessedBy!==a.uuid&&(l.lastAccessedBy=a.uuid,e.Array.ensure(l.observers,a))):delete a.mapIDs[k])}g=g.sort().join(",");if(g!==a.ids){a.ids=g;if(a.isComputed){a.depsCount=d.length;a.deps=e.mix({},a.mapIDs);a.depsVersion={};for(var n in a.mapIDs){var r=a.mapIDs[n];a.depsVersion[r.uuid]=r.version}}else a.observers=d;k=0;for(var q;q=h[k++];)c[q.uuid]||e.Array.remove(q.observers,a)}}catch(m){e.warn(m)}}return f}}}function U(a){var b="??"+Nd++;Oa.map[b]=a;return b+" "}function Pa(a){return Oa.map[a]}function Od(a){for(var b=Xb(a),c=0,d=b.length;c<d;c++)a=a.replace(b[c],U);return a}function Xb(a,b,c){var d=!1,f=0;b=b||0;c=c||[];for(var e=a.length;b<e;b++){var g=a.charAt(b);d?g===d&&(c.push(a.slice(f,b+1)),d=!1):"'"===g?(d="'",f=b):'"'===g&&(d='"',f=b)}return!1!==d?Xb(a,f+1,c):c}function Pd(a){return a.replace(Qd,U).replace(Rd,function(a){return Sd[a]?a:"__vmodel__."+a})}function V(a,b){var c=a+":"+b,d=Yb.get(c);if(d)return d.slice(0);Oa.map={};var d=a.replace(Td,function(a,b){return b+U(a.slice(b.length))}),d=Od(d),d=d.replace(Ud,U).replace(Vd,"$1").replace(Wd,function(a,b,c){return b+U(c)+":"}).replace(Xd,"$1__vmodel__.").replace(Yd,function(a,b){return"|"+U(b)}),d=Pd(d),d=d.split(Zd),f=d.shift().replace(Qa,Pa).trim();/\?\?\d/.test(f)&&(f=f.replace(Qa,Pa));d.length?(d=d.map(function(a){var b="";a=a.replace($d,function(a,c){/\S/.test(c)&&(b+=","+c);return""});return"["+e.quote(a.trim())+b+"]"}),d=("avalon.composeFilters("+d+")(__value__)").replace(Qa,Pa)):d="";return Yb.put(c,[f,d])}function Ra(a){ae.test(a)&&(a+="($event)");9>A&&(a=a.replace(be,function(a,c,d){return"__vmodel__."+c+".call(__vmodel__"+(/\S/.test(d)?","+d:"")+")"}));return a}function Sa(a,b,c){for(var d in b)1!==ce[d]&&(this[d]=b[d]);this.vm=a;this.observers=[];this.callback=c;this.uuid=++de;this.ids="";this.mapIDs={};this.isAction=!0;a=this.expr;if("function"!==typeof this.getter){var f;b=V(a,this.type);b=b[1]?b[1].replace(/__value__\)$/,b[0]+")"):b[0];try{f=new Function("__vmodel__","return "+b+";")}catch(g){e.log("parse getter: [",a,b,"]error"),f=e.noop}this.getter=f}if("duplex"===this.type){var h;f="try{ "+V(a,this.type)[0]+' \x3d __value__}catch(e){avalon.log(e, "in on dir")}';try{h=new Function("__vmodel__","__value__",f+";")}catch(g){e.log("parse setter: ",a," error"),h=e.noop}this.setter=h}this.value=NaN;this.node||(this.value=this.get())}function Ta(a){if(a&&"object"===typeof a){if(a&&a.$events)return a.$model;if(Array.isArray(a)){for(var b=[],c=0,d=a.length;c<d;c++)b.push(Ta(a[c]));return b}b={};for(c in a)b[c]=Ta(a[c]);return b}return a}function fa(a,b,c){this.expr=a;if(b){var d=p.createProxy(b,this);d&&(b=d)}this.value=b;this.vm=c;try{c.$mutations[a]=this}catch(f){}this.uuid=++ee;this.updateVersion();this.mapIDs={};this.observers=[]}function fe(a){a=a.toString();return a.substring(a.indexOf("{}")+1,a.lastIndexOf("}"))}function ge(a){var b=function(){};b.prototype=a;return new b}function he(a,b){"function"===typeof b&&((a.prototype=ge(b.prototype)).constructor=a)}function Ua(a,b){e.mix(this,a);e.mix(this,F);this.$hashcode=e.makeHashCode("$");this.$id=this.$id||this.$hashcode;this.$events={__dep__:b||new fa(this.$id)};e.config.inProxyMode?(delete this.$mutations,this.$accessors={},this.$computed={},this.$track=""):this.$accessors={$model:Zb};void 0===b?(this.$watch=p.watchFactory(this.$events),this.$fire=p.fireFactory(this.$events)):(delete this.$watch,delete this.$fire)}function ie(a,b,c){return a in F?!1:"$"===a.charAt(0)?c?($b[a]||($b[a]=1,e.warn("ms-for\u4e2d\u7684\u53d8\u91cf"+a+"\u4e0d\u518d\u5efa\u8bae\u4ee5$\u4e3a\u524d\u7f00")),!0):!1:null==b?(e.warn("\u5b9a\u4e49vmodel\u65f6"+a+"\u7684\u5c5e\u6027\u503c\u4e0d\u80fd\u4e3anull undefine"),!0):/error|date|function|regexp/.test(e.type(b))?!1:!(b&&b.nodeName&&b.nodeType)}function Va(a,b,c){var d=null,f=c?je:fa;return{get:function(){d||(d=new f(a,b,this));return d.get()},set:function(c){d||(d=new f(a,b,this));d.set(c)},enumerable:!0,configurable:!0}}function la(a){var b=e.type(a);if("array"===b){for(var b=[],c=0;c<a.length;c++)b[c]=la(a[c]);return b}if("object"===b&&"string"===typeof a.$track){var d={};(a.$track.match(/[^\u2625]+/g)||[]).forEach(function(b){var c=a[b];d[b]=c&&c.$events?la(c):c});return d}return a}function ac(a,b,c){Wa?Object.defineProperty(a,b,{value:c,writable:!0,enumerable:!1,configurable:!0}):ke[b]||(a[b]=c)}function bc(a){var b=[],c;for(c in a)b.push(c);return b}function Xa(a,b,c){if(0===c)return a===b;if(null===a&&null===b||void 0===a&&void 0===b)return!0;var d=Array.isArray(a);if(d!==Array.isArray(b))return!1;if(d){var f;a:if(a.length!==b.length)f=!1;else{for(d=a.length-1;0<=d;d--)try{if(!Xa(a[d],b[d],c-1)){f=!1;break a}}catch(e){f=!1;break a}f=!0}return f}return"object"===typeof a&&"object"===typeof b?le(a,b,c):a===b}function le(a,b,c){if(null===a||null===b||bc(a).length!==bc(b).length)return!1;for(var d in a){if(!(d in b))return!1;try{if(!Xa(a[d],b[d],c-1))return!1}catch(f){return!1}}return!0}function cc(){var a=Ya[0];a&&a()}function dc(a,b,c){a=[].concat(a[b]);b=0;for(var d;d=a[b++];)"function"===typeof d&&d(c)}function Za(a){var b=a.toLowerCase();return function(c){var d=this.dom,f=e(d),h=isFinite(c.stagger)?1E3*c.stagger:0;if(h&&c.staggerKey){var g=ec.get(c.staggerKey)||ec.put(c.staggerKey,{count:0,items:0});g.count++;g.items++}var k=g&&g.count||0,l,n=function(b){b=!1!==b;0===--d.__ms_effect_&&(e.unbind(d,$a),e.unbind(d,ab));clearTimeout(l);dc(c,"on"+a+(b?"Done":"Abort"),d);g&&0===--g.items&&(g.count=0);c.queue&&(Ya.shift(),cc())};dc(c,"onBefore"+a,d);if(c[b])c[b](d,function(a){n(!1!==a)});else ma&&(f.addClass(c[b+"Class"]),f.removeClass(me(c,b)),d.__ms_effect_?d.__ms_effect_++:(f.bind($a,n),f.bind(ab,n),d.__ms_effect_=1),setTimeout(function(){var a=NaN===e.root.offsetWidth;f.addClass(c[b+"ActiveClass"]);a=ne(d);h||(l=setTimeout(function(){n(!1)},a+32))},17+h*k))}}function me(a,b){b="leave"===b?"enter":"leave";return[b+"Class",b+"ActiveClass"].map(function(b){return a[b]}).join(" ")}function fc(a){var b=oe.test(a)?1E3:1;return parseFloat(a)*b}function ne(a){a=y.getComputedStyle(a,null);var b=a[pe];return fc(a[qe])||fc(b)}function ga(a,b){var c=a.ownerDocument,d=a.nodeName,f="_"+d;ga[f]||(d=c.body.appendChild(c.createElement(d)),b=e.css(d,"display"),c.body.removeChild(d),"none"===b&&(b="block"),ga[f]=b);return ga[f]}function gc(a,b){var c=a.innerRender=e.scan(a.fragment,a.vm);e.shadowCopy(b,c.root);delete b.nodeValue}function bb(a,b){a.children&&a.children.forEach(function(a){if("option"===a.nodeName){var d=a.props;if(!("disabled"in d)){var f=cb(a,d),f=String(f||"").trim();d.selected="string"===typeof b?f===b:-1!==b.indexOf(f);a.dom&&(a.dom.selected=d.selected)}}else bb(a,b)})}function cb(a,b){if(b&&"value"in b)return b.value+"";var c=[];a.children.forEach(function(a){"#text"===a.nodeName?c.push(a.nodeValue):"#document-fragment"===a.nodeName&&c.push(cb(a))});return c.join("")}function hc(a,b){a.children.forEach(function(a){"option"===a.nodeName?!0===a.props.selected&&b.push(cb(a,a.props)):a.children&&hc(a,b)});return b}function na(a){a.userCb&&a.userCb.call(a.vm,{type:"changed",target:a.dom})}function w(a){var b=this._ms_duplex_;if(!this.composing&&this.value!==b.value){if(this.caret)try{var c=b.getCaret(this);b.pos=c}catch(d){}4<b.debounceTime?(a=new Date,c=a-b.time||0,b.time=a,c>=b.debounceTime?W[b.dtype].call(b):(clearTimeout(b.debounceID),b.debounceID=setTimeout(function(){W[b.dtype].call(b)},c))):b.isChanged?setTimeout(function(){W[b.dtype].call(b)},4):W[b.dtype].call(b)}}function re(a){for(var b=0,c;c=this.parsers[b++];)(c=e.parsers[c])&&(a=c.call(this,a));return a}function ic(a){var b=typeof a;return a&&"object"===b?a.$hashcode:b+":"+a}function se(a,b){if(Q(b)){var c=Array.isArray(b),d=[],f=[],h=0;a.isArray=c;a.fragments?(a.preFragments=a.fragments,e.each(b,function(a,b){var e=c?ic(b):a;f.push({key:e,val:b,index:h++});d.push(e)})):e.each(b,function(a,b){if(!(a in F)){var e=c?ic(b):a;f.push(new ea([],e,b,h++));d.push(e)}});a.fragments=f;return d.join(";;")}return NaN}function te(a){var b=a.fragments.map(function(b,c){jc(b,a,c);db(a.cache,b);return b}),c=a.parentChildren,d=c.indexOf(a.begin);c.splice.apply(c,[d+1,0].concat(b))}function ue(a){var b=a.cache,c={},d=[],f=a.preFragments;f.forEach(function(a){a._dispose=!0});a.fragments.forEach(function(f,g){var k=kc(b,f.key);if(k){delete k._dispose;k.oldIndex=k.index;k.index=g;var l=k.vm,n=a.keyName;e.config.inProxyMode?l.$accessors[n].value=NaN:l.$accessors[n].set(NaN);k.vm[a.valName]=f.val;k.vm[a.keyName]=a.isArray?g:k.key;db(c,k)}else d.push(f)});d.forEach(function(d){var e;for(var k in b){e=k;break}e=e?kc(b,e):void 0;e?(e.oldIndex=e.index,e.key=d.key,k=e.val=d.val,d=e.index=d.index,e.vm[a.valName]=k,e.vm[a.keyName]=a.isArray?d:e.key,delete e._dispose):(d=new ea([],d.key,d.val,d.index),e=jc(d,a,d.index),f.push(e));db(c,e)});a.fragments=f;f.sort(function(a,b){return a.index-b.index});a.cache=c}function ve(a){for(var b=a.begin.dom,c=b.parentNode,d=a.fragments,f=a.end.dom,e=0,g;g=d[e];e++)if(g._dispose)d.splice(e,1),e--,g.dispose();else{if(g.oldIndex!==g.index){var k=g.toFragment(),l=null===b.nextSibling;c.insertBefore(k,b.nextSibling);l&&!c.contains(f)&&c.insertBefore(f,b.nextSibling)}b=g.split}b=a.parentChildren;f=b.indexOf(a.begin);a=b.indexOf(a.end);d.splice.apply(b,[f+1,a-f].concat(d));"SELECT"===c.nodeName&&c._ms_duplex_&&X.select.call(c._ms_duplex_)}function jc(a,b,c){var d={};d[b.keyName]=b.isArray?c:a.key;d[b.valName]=a.val;b.asName&&(d[b.asName]=b.value);var f=a.vm=p.itemFactory(b.vm,{data:d});b.isArray?f.$watch(b.valName,function(a){b.value&&b.value.set&&b.value.set(f[b.keyName],a)}):f.$watch(b.valName,function(c){b.value[a.key]=c});a.index=c;a.innerRender=e.scan(b.fragment,f,function(){N.push.apply(a.children,this.root.children);this.root=a});return a}function kc(a,b){var c=a[b];if(c){var d=c.arr;if(d){var f=d.pop();d.length||(c.arr=0);return f}delete a[b];return c}}function db(a,b){var c=b.key;a[c]?(c=a[c],(c.arr||(c.arr=[])).push(b)):a[c]=b}function lc(){for(var a=[],b=0;b<arguments.length;b++){var c=arguments[b],d=typeof c;if("string"===d||"number"===d||!0===c)a.push(c);else if(Array.isArray(c))a.push(lc.apply(null,c));else if("object"===d)for(var f in c)c.hasOwnProperty(f)&&c[f]&&a.push(f)}return a.join(" ")}function oa(a){var b=a.target;e(b).addClass(b.getAttribute(mc[a.type])||"")}function ha(a){var b=a.target;a=mc[a.type];e(b).removeClass(b.getAttribute(a)||"");"change-active"!==a&&e(b).removeClass(b.getAttribute("change-active")||"")}function nc(a){"value"===a.propertyName&&w.call(this,a)}function H(a){var b=this;setTimeout(function(){w.call(b,a)},0)}function oc(){this.caret=!0}function pc(){this.caret=!1}function eb(){this.composing=!0}function fb(a){this.composing=!1;H.call(this,a)}function pa(a){var b=a.keyCode;91===b||15<b&&19>b||37<=b&&40>=b||w.call(this,a)}function we(a,b){var c;a.createTextRange?xe(function(){a.focus();c=a.createTextRange();c.collapse(!0);c.moveEnd("character",b);c.moveStart("character",b);c.select()}):(a.focus(),void 0!==a.selectionStart&&a.setSelectionRange(b,b))}function ye(a){var b=0,c,d,f;-1<a.selectionStart+a.selectionEnd?b=a.selectionStart:(d=m.selection.createRange())&&d.parentElement()===a&&(f=a.value.length,c=a.value.replace(/\r\n/g,"\n"),b=a.createTextRange(),b.moveToBookmark(d.getBookmark()),a=a.createTextRange(),a.collapse(!1),-1<b.compareEndPoints("StartToEnd",a)?b=f:(b=-b.moveStart("character",-f),b+=c.slice(0,b).split("\n").length-1));return b}function qc(a,b){var c=this.dom;if(this.isString&&b&&!a&&!c.valueHijack){c.valueHijack=w;var d=setInterval(function(){e.contains(e.root,c)?c.valueHijack({type:"poll"}):clearInterval(d)},30);return d}}function qa(a){for(;"FORM"!==a.tagName;)a=a.parentNode;return a._ms_validate_}function ze(a){a.preventDefault();if((a=qa(a.target))&&a.onManual)a.onManual()}function ra(a,b,c){for(var d=0,f;f=a[d++];){var e=f.rules&&f.duplex;e?(b.push(e),rc(e,c)):f.children?ra(f.children,b,c):Array.isArray(f)&&ra(f,b,c)}}function Ae(a){var b=a.target;a=b._ms_duplex_;var c=(a||{}).vdom;a&&c.rules&&!a.validator&&(b=qa(b))&&e.Array.ensure(b.fields,a)&&rc(a,b)}function sc(a){var b=a.target._ms_duplex_,c=qa(a.target);c&&c.validate(b,0,a)}function rc(a,b){var c=a.dom;a.validator||(a.validator=b,!b.validateInKeyup||a.isChanged||a.debounceTime||e.bind(c,"keyup",sc),b.validateInBlur&&e.bind(c,"blur",sc),b.resetInFocus&&e.bind(c,"focus",function(a){var b=a.target,c=b._ms_duplex_,e=qa(a.target);e&&e.onReset.call(b,a,c)}))}function Be(){var a=this.data||{};return this.message.replace(Ce,function(b,c){return null==a[c]?"":a[c]})}function De(a,b,c,d){var f=b.type,h=e.directives[f];if(B){var g=e.vdom(c,"toDOM");1===g.nodeType&&g.removeAttribute(b.attrName);c.dom=g}var g=h.update?function(a){!d.mount&&/css|visible|duplex/.test(f)?d.callbacks.push(function(){h.update.call(l,l.node,a)}):h.update.call(l,l.node,a)}:e.noop,k;for(k in h)b[k]=h[k];b.node=c;var l=new Sa(a,b,g);l.init&&l.init();l.update();return l}function Ee(a,b){return a.priority-b.priority}function tc(a){for(var b=0,c=0,d;d=a[c++];)b="#document-fragment"===d.nodeName?b+tc(d.children):b+1;return b}function gb(a,b){b&&b.forEach(function(b){if(b){var d=b.children&&tc(b.children);if("#document-fragment"===b.nodeName)var f=m.createDocumentFragment();else{var f=e.vdom(b,"toDOM"),h=f.childNodes&&f.childNodes.length;h&&d&&h>d&&(uc[f.nodeName]||e.clearHTML(f))}d&&(gb(f,b.children),"select"===b.nodeName&&(d=[],hc(b,d),bb(b,d)));try{uc[a.nodeName]||a.appendChild(f)}catch(g){}}})}function hb(a){for(var b;b=a.firstChild;)1===b.nodeType&&hb(b),a.removeChild(b)}function vc(a,b){var c=a.indexOf(b)+1,d=1,f=[],e;for(f.start=c;b=a[c++];)if(f.push(b),"#comment"===b.nodeName)if(0===b.nodeValue.indexOf("ms-for:"))d++;else if("ms-for-end:"===b.nodeValue&&(d--,0===d)){e=b;f.pop();break}f.end=e;return f}function wc(a,b,c){this.root=a;this.vm=b;this.beforeReady=c;this.bindings=[];this.callbacks=[];this.directives=[];this.init()}function Fe(){var a=this.beforeUpdate(),b=this.value=this.get();if(this.callback&&this.diff(b,a)){this.callback(this.node,this.value);var c=this.vm,d=c.$render,f=c.$events.onViewChange;f&&d&&d.root&&!e.viewChanging&&(sa&&(clearTimeout(sa),sa=null),sa=setTimeout(function(){f.forEach(function(a){a.callback.call(c,{type:"viewchange",target:d.root,vmodel:c})})}))}this._isScheduled=!1}function Ge(a){a=p.toJson(a);if(Array.isArray(a)){var b={};a.forEach(function(a){a&&e.shadowCopy(b,a)});return b}return a}function xc(a,b){a.innerRender=b;var c=b.root,d=a.node,f=d.props.slot,e;for(e in c)d[e]=c[e];d.props&&f&&(d.props.slot=f);b.root=d;b.vnodes[0]=d}function Y(a,b,c){var d=a.$events["on"+c];d&&d.forEach(function(d){setTimeout(function(){d.callback.call(a,{type:c.toLowerCase(),target:b.dom,vmodel:a})},0)})}function He(a,b,c){var d=[];a=a.defaults;yc(a,d);yc(b,d);var f={},h;for(h in a){var g=b[h];f[h]=null==g?a[h]:g}f.$id=b.id||b.$id||e.makeHashCode(c);delete f.id;b=e.mix(!0,{},f);var k=e.define(b);d.forEach(function(a){k.$watch(a.type,a.cb)});return k}function yc(a,b){for(var c in a)Ie[c]&&"function"===typeof a[c]&&0===c.indexOf("on")&&b.unshift({type:c,cb:a[c]})}function zc(a,b){var c=b&&b[0]&&b[0].forDir;c&&(c.parentChildren=a)}function Ac(a,b){for(var c=0,d;d=a[c];c++)if("slot"===d.nodeName){zc(a,b);a.splice.apply(a,[c,1].concat(b));break}else d.children&&Ac(d.children,b)}function Bc(a,b){for(var c=0,d;d=a[c];c++)"slot"===d.nodeName?(d=d.props.name,zc(a,b[d]),a.splice.apply(a,[c,1].concat(b[d]))):d.children&&Bc(d.children,b)}function Je(a){var b=a.displayName;delete a.displayName;var c={defaults:e.mix(!0,{},this.defaults,a.defaults)};a.soleSlot&&(c.soleSlot=a.soleSlot);c.template=a.template||this.template;return e.component(b,c)}var ta="object"===typeof window?window:"object"===typeof global?global:{},B=!!ta.location&&ta.navigator,m=B?ta.document:{createElement:Object,createElementNS:Object,documentElement:"xx",contains:Boolean},E=B?m.documentElement:{outerHTML:"x"},Ke={objectobject:7,objectundefined:6,undefinedfunction:NaN,undefinedobject:NaN},A=m.documentMode||Ke[typeof m.all+typeof XMLHttpRequest],O=/NaN|undefined/.test(A)||8<A;G.prototype={put:function(a,b){var c={key:a,value:b};this._keymap[a]=c;this.tail?(this.tail.newer=c,c.older=this.tail):this.head=c;this.tail=c;this.size===this.limit?this.shift():this.size++;return b},shift:function(){var a=this.head;a&&(this.head=this.head.newer,this.head.older=a.newer=a.older=this._keymap[a.key]=void 0,delete this._keymap[a.key],this.size--)},get:function(a){a=this._keymap[a];if(void 0!==a){if(a===this.tail)return a.value;a.newer&&(a===this.head&&(this.head=a.newer),a.newer.older=a.older);a.older&&(a.older.newer=a.newer);a.newer=void 0;if(a.older=this.tail)this.tail.newer=a;this.tail=a;return a.value}}};var wb={},z={},y=ta;e.init=function(a){this[0]=this.element=a};e.fn=e.prototype=e.init.prototype;var za=/[^, ]+/g,ib=/\S+/g,p={},Cc=Object.prototype,S=Cc.toString,L=Cc.hasOwnProperty,N=Array.prototype,Dc="object"===typeof console;e.config={debug:!0};var Le=/([a-z\d])([A-Z]+)/g,Me=/[-_][^-_]/g,ua=N.slice,$c=/\d\.\d{4}/,ad=1,bd=/[-.*+?^${}()|[\]\/\\]/g,P={},t={};y.avalon=e;var Ne=/&[a-z0-9#]{2,10};/,jb=m.createElement("div");ya(e,{Array:{merge:function(a,b){a.push.apply(a,b)},ensure:function(a,b){if(-1===a.indexOf(b))return a.push(b)},removeAt:function(a,b){return!!a.splice(b,1).length},remove:function(a,b){var c=a.indexOf(b);return~c?e.Array.removeAt(a,c):!1}},evaluatorPool:new G(888),parsers:{number:function(a){return""===a?"":parseFloat(a)||0},string:function(a){return null===a||void 0===a?"":a+""},"boolean":function(a){return""===a?a:"true"===a||"1"===a}},_decode:function(a){return Ne.test(a)?(jb.innerHTML=a,jb.innerText||jb.textContent):a}});u.plugins={interpolate:function(a){var b=a[0];a=a[1];if(b===a)throw new SyntaxError("interpolate openTag cannot equal to closeTag");if(/[<>]/.test(b+"test"+a))throw new SyntaxError('interpolate cannot contains "\x3c" or "\x3e"');u.openTag=b;u.closeTag=a;b=Ba(b);a=Ba(a);u.rtext=new RegExp(b+"(.+?)"+a,"g");u.rexpr=new RegExp(b+"([\\s\\S]*)"+a)}};u({interpolate:["{{","}}"],debug:!0});ya(e,{shadowCopy:ya,oneObject:K,inspect:S,ohasOwn:L,rword:za,version:"2.2.9",vmodels:{},directives:z,directive:function(a,b){z[a]&&e.warn(a,"directive have defined! ");z[a]=b;b.update||(b.update=function(){});b.delay&&(wb[a]=1);return b},eventHooks:P,eventListeners:{},validators:{},cssHooks:t,log:function(){Dc&&e.config.debug&&Function.apply.call(console.log,console,arguments)},noop:function(){},warn:function(){Dc&&e.config.debug&&Function.apply.call(console.warn||console.log,console,arguments)},error:function(a,b){throw(b||Error)(a);},config:u,modern:O,msie:A,root:E,document:m,window:y,inBrowser:B,isObject:Q,range:function(a,b,c){c||(c=1);null==b&&(b=a||0,a=0);var d=-1;b=Math.max(0,Math.ceil((b-a)/c));for(var f=Array(b);++d<b;)f[d]=a,a+=c;return f},slice:function(a,b,c){return ua.call(a,b,c)},hyphen:function(a){return a.replace(Le,"$1-$2").toLowerCase()},camelize:function(a){return!a||0>a.indexOf("-")&&0>a.indexOf("_")?a:a.replace(Me,function(a){return a.charAt(1).toUpperCase()})},escapeRegExp:Ba,quote:function(a){return e._quote(a)},makeHashCode:Aa});if(!R("\u53f8\u5f92\u6b63\u7f8e".trim)){var Oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(Oe,"")}}Object.create||(Object.create=function(){function a(){}return function(b){if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");a.prototype=b;return new a}}());var Pe=!{toString:null}.propertyIsEnumerable("toString"),Qe=function(){}.propertyIsEnumerable("prototype"),Ec="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),Re=Ec.length;R(Object.keys)||(Object.keys=function(a){var b=[],c=Qe&&"function"===typeof a;if("string"===typeof a||a&&a.callee)for(c=0;c<a.length;++c)b.push(String(c));else for(var d in a)c&&"prototype"===d||!L.call(a,d)||b.push(String(d));if(Pe)for(c=(c=a.constructor)&&c.prototype===a,d=0;d<Re;d++){var f=Ec[d];c&&"constructor"===f||!L.call(a,f)||b.push(f)}return b});R(Array.isArray)||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)});R(R.bind)||(Function.prototype.bind=function(a){if(2>arguments.length&&void 0===a)return this;var b=this,c=arguments;return function(){var d=[],f;for(f=1;f<c.length;f++)d.push(c[f]);for(f=0;f<arguments.length;f++)d.push(arguments[f]);return b.apply(a,d)}});try{ua.call(e.document.documentElement)}catch(a){N.slice=function(a,c){c="undefined"!==typeof c?c:this.length;if(Array.isArray(this))return ua.call(this,a,c);var d,f=[],e;d=this.length;var g=a||0,g=0<=g?g:d+g;e=c?c:d;0>c&&(e=d+c);e-=g;if(0<e)if(f=Array(e),this.charAt)for(d=0;d<e;d++)f[d]=this.charAt(g+d);else for(d=0;d<e;d++)f[d]=this[g+d];return f}}R(N.map)||e.shadowCopy(N,{indexOf:function(a,b){var c=this.length,d=~~b;for(0>d&&(d+=c);d<c;d++)if(this[d]===a)return d;return-1},lastIndexOf:function(a,b){var c=this.length,d=null==b?c-1:b;for(0>d&&(d=Math.max(0,c+d));0<=d;d--)if(this[d]===a)return d;return-1},forEach:ca("","_",""),filter:ca("r\x3d[],j\x3d0,","if(_)r[j++]\x3dthis[i]","return r"),map:ca("r\x3d[],","r[i]\x3d_","return r"),some:ca("","if(_)return true","return false"),every:ca("","if(!_)return false","return true")});var Fc=function(){var a={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},b=function(b){b=b.charCodeAt(0);var c=a[b];return c?c:"\\u00"+("000000"+(b.toString(16)||0)).slice(-2)},c=/[\x00-\x1f\x22\x5c]/g;return function(a){c.lastIndex=0;return'"'+(c.test(a)?String(a).replace(c,b):a)+'"'}}();try{e._quote=8>=msie?Fc:JSON.stringify}catch(a){e._quote=Fc}var Gc={};"Boolean Number String Function Array Date RegExp Object Error".replace(e.rword,function(a){Gc["[object "+a+"]"]=a.toLowerCase()});e.type=function(a){return null==a?String(a):"object"===typeof a||"function"===typeof a?Gc[S.call(a)]||"object":typeof a};var Bb=/^\s*\bfunction\b/;e.isFunction="object"===typeof alert?function(a){try{return Bb.test(a+"")}catch(b){return!1}}:function(a){return"[object Function]"===S.call(a)};var dd=/^\[object (?:Window|DOMWindow|global)\]$/;e.isWindow=xb(e.window)?xb:cd;var Hc,yb;for(Hc in e({}))break;yb="0"!==Hc;e.isPlainObject=/\[native code\]/.test(Object.getPrototypeOf)?fd:ed;var Se=/object|function/;e.mix=e.fn.mix=function(){var a=arguments.length,b=!1,c=0,d=[];!0===arguments[0]&&(b=!0,c=1);for(;c<a;c++){var f=arguments[c],f=f&&Se.test(typeof f)?f:{};d.push(f)}1===d.length&&d.unshift(this);return Ab(b,d)};var zb,hd=/(Array|List|Collection|Map|Arguments)\]$/;e.each=function(a,b){if(a){var c=0;if(gd(a))for(var d=a.length;c<d&&!1!==b(c,a[c]);c++);else for(c in a)if(a.hasOwnProperty(c)&&!1===b(c,a[c]))break}};(function(){var a=["%cavalon.js %c"+e.version+" %cin debug mode, %cmore...","color: rgb(114, 157, 52); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(85, 85, 85); font-weight: normal;","color: rgb(82, 140, 224); font-weight: normal; text-decoration: underline;"];if("object"===typeof console){var b=console,c=b.groupCollapsed||b.log;Function.apply.call(c,b,a);b.log("You're running avalon in debug mode - messages will be printed to the console to help you fix problems and optimise your application.\n\nTo disable debug mode, add this line at the start of your app:\n\n  avalon.config({debug: false});\n\nDebug mode also automatically shut down amicably when your app is minified.\n\nGet help and support:\n  https://segmentfault.com/t/avalon\n  http://avalonjs.coding.me/\n  http://www.baidu-x.com/?q\x3davalonjs\n  http://www.avalon.org.cn/\n\nFound a bug? Raise an issue:\n  https://github.com/RubyLouvre/avalon/issues\n\n");c!==console.log&&b.groupEnd(a)}})();var Te=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,Ue=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,Ve=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/ig,We={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/ig,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/ig,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/ig},ld={yyyy:v("FullYear",4),yy:v("FullYear",2,0,!0),y:v("FullYear",1),MMMM:ia("Month"),MMM:ia("Month",!0),MM:v("Month",2,1),M:v("Month",1,1),dd:v("Date",2),d:v("Date",1),HH:v("Hours",2),H:v("Hours",1),hh:v("Hours",2,-12),h:v("Hours",1,-12),mm:v("Minutes",2),m:v("Minutes",1),ss:v("Seconds",2),s:v("Seconds",1),sss:v("Milliseconds",3),EEEE:ia("Day"),EEE:ia("Day",!0),a:function(a,b){return 12>a.getHours()?b.AMPMS[0]:b.AMPMS[1]},Z:function(a){a=-1*a.getTimezoneOffset();return a=(0<=a?"+":"")+(Ca(Math[0<a?"floor":"ceil"](a/60),2)+Ca(Math.abs(a%60),2))}},kd=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,jd=/^\/Date\((\d+)\)\/$/,kb={AMPMS:{0:"\u4e0a\u5348",1:"\u4e0b\u5348"},DAY:{0:"\u661f\u671f\u65e5",1:"\u661f\u671f\u4e00",2:"\u661f\u671f\u4e8c",3:"\u661f\u671f\u4e09",4:"\u661f\u671f\u56db",5:"\u661f\u671f\u4e94",6:"\u661f\u671f\u516d"},MONTH:{0:"1\u6708",1:"2\u6708",2:"3\u6708",3:"4\u6708",4:"5\u6708",5:"6\u6708",6:"7\u6708",7:"8\u6708",8:"9\u6708",9:"10\u6708",10:"11\u6708",11:"12\u6708"},SHORTDAY:{0:"\u5468\u65e5",1:"\u5468\u4e00",2:"\u5468\u4e8c",3:"\u5468\u4e09",4:"\u5468\u56db",5:"\u5468\u4e94",6:"\u5468\u516d"},fullDate:"y\u5e74M\u6708d\u65e5EEEE",longDate:"y\u5e74M\u6708d\u65e5",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};kb.SHORTMONTH=kb.MONTH;Da.locate=kb;var F={$id:void 0,$render:void 0,$track:void 0,$element:void 0,$computed:void 0,$watch:void 0,$fire:void 0,$events:void 0,$accessors:void 0,$hashcode:void 0,$mutations:void 0,$vbthis:void 0,$vbsetter:void 0},Ic={stop:function(a){a.stopPropagation();return a},prevent:function(a){a.preventDefault();return a}},Jc={esc:27,tab:9,enter:13,space:32,del:46,up:38,left:37,right:39,down:40},lb;for(lb in Jc)(function(a,b){Ic[a]=function(a){a.which!==b&&(a.$return=!0);return a}})(lb,Jc[lb]);var Xe=e.filters={};e.composeFilters=function(){var a=arguments;return function(b){for(var c=0,d;d=a[c++];){var f=e.filters[d[0]];if("function"===typeof f){d[0]=b;try{b=f.apply(0,d)}catch(h){}}}return b}};e.escapeHtml=Db;e.mix(Xe,{uppercase:function(a){return String(a).toUpperCase()},lowercase:function(a){return String(a).toLowerCase()},truncate:function(a,b,c){if(!a)return"";a=String(a);isNaN(b)&&(b=30);c="string"===typeof c?c:"...";return a.length>b?a.slice(0,b-c.length)+c:a},camelize:e.camelize,date:Da,escape:Db,sanitize:function(a){return a.replace(Te,"").replace(Ve,function(a,c){var d=a.toLowerCase().match(/<(\w+)\s/);d&&(d=We[d[1]])&&(a=a.replace(d,function(a,b,c){a=c.charAt(0);return b+"\x3d"+a+"javascript:void(0)"+a}));return a.replace(Ue," ").replace(/\s+/g," ")})},number:Cb,currency:function(a,b,c){return(b||"\u00a5")+Cb(a,isFinite(c)?c:2)}},{filterBy:function(a,b){var c=e.type(a);if("array"!==c&&"object"!==c)throw"filterBy\u53ea\u80fd\u5904\u7406\u5bf9\u8c61\u6216\u6570\u7ec4";var d=e.slice(arguments,2),f=e.type(b);if("function"===f)var h=b._orig||b;else if("string"===f||"number"===f){if(""===b)return a;var g=new RegExp(e.escapeRegExp(b),"i"),h=function(a){return g.test(a)}}else return a;var k="array"===c,l=k?[]:{};Ea(a,k,function(b){var c=a[b];h.apply({key:b},[c,b].concat(d))&&(k?l.push(c):l[b]=c)});return l},orderBy:function(a,b,c){var d=e.type(a);if("array"!==d&&"object"!==d)throw"orderBy\u53ea\u80fd\u5904\u7406\u5bf9\u8c61\u6216\u6570\u7ec4";var f="string"==typeof b?function(a){return a&&a[b]}:"function"===typeof b?b:function(a){return a},h={},g=[];Ea(a,Array.isArray(a),function(b){var c=f(a[b],b);c in h?h[c].push(b):h[c]=[b];g.push(c)});g.sort();0>c&&g.reverse();var k="array"===d,l=k?[]:{};return Fa(l,g,function(b){b=h[b].shift();k?l.push(a[b]):l[b]=a[b]})},selectBy:function(a,b,c){if(e.isObject(a)&&!Array.isArray(a)){var d=[];return Fa(d,b,function(b){d.push(a.hasOwnProperty(b)?a[b]:c?c[b]:"")})}return a},limitBy:function(a,b,c){var d=e.type(a);if("array"!==d&&"object"!==d)throw"limitBy\u53ea\u80fd\u5904\u7406\u5bf9\u8c61\u6216\u6570\u7ec4";if("number"!==typeof b||b!==b)return a;"object"===d&&(a=md(a,!1));var f=a.length;b=Math.floor(Math.min(f,b));c="number"===typeof c?c:0;0>c&&(c=Math.max(0,f+c));for(var h=[];c<f&&h.length!==b;c++)h.push(a[c]);if("array"===d)return h;var g={};return Fa(g,h,function(a){g[a.key]=a.value})}},Ic);var Ga=/^(?:checkbox|radio)$/;e.contains=Ha;e.cloneNode=function(a){return a.cloneNode(!0)};B&&od();Fb.prototype={toString:function(){var a=this.node.className;return(a=("string"===typeof a?a:a.baseVal).match(ib))?a.join(" "):""},contains:function(a){return-1<(" "+this+" ").indexOf(" "+a+" ")},add:function(a){this.contains(a)||this.set(this+" "+a)},remove:function(a){this.set((" "+this+" ").replace(" "+a+" "," "))},set:function(a){a=a.trim();var b=this.node;"object"===typeof b.className?b.setAttribute("class",a):b.className=a;a||b.removeAttribute("class")}};"add,remove".replace(za,function(a){e.fn[a+"Class"]=function(b){var c=this[0]||{};b&&"string"===typeof b&&1===c.nodeType&&b.replace(ib,function(b){Gb(c)[a](b)});return this}});e.shadowCopy(e.fn,{hasClass:function(a){var b=this[0]||{};return 1===b.nodeType&&Gb(b).contains(a)},toggleClass:function(a,b){var c="boolean"===typeof b,d=this;String(a).replace(ib,function(a){var e=c?b:!d.hasClass(a);d[e?"addClass":"removeClass"](a)});return this}});var va={};"accept-charset,acceptCharset|char,ch|charoff,chOff|class,className|for,htmlFor|http-equiv,httpEquiv".replace(/[^\|]+/g,function(a){a=a.split(",");va[a[0]]=a[1]});"autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelected,,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected".replace(/\w+/g,function(a){va[a.toLowerCase()]=a});"accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan,dateTime,defaultValue,contentEditable,frameBorder,longDesc,maxLength,marginWidth,marginHeight,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign".replace(/\w+/g,function(a){va[a.toLowerCase()]=a});var qd=/^[\],:{}\s]*$/,td=/(?:^|:|,)(?:\s*\[)+/g,rd=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,sd=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,Ye=/^\[object SVG\w*Element\]$/,Ze=/&amp;/g,mb={};try{e.parseJSON=JSON.parse}catch(a){e.parseJSON=pd}e.fn.attr=function(a,b){return 2===arguments.length?(this[0].setAttribute(a,b),this):this[0].getAttribute(a)};var wa=K("float","cssFloat");e.cssNumber=K("animationIterationCount,columnCount,order,flex,flexGrow,flexShrink,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom");var Kc=["","-webkit-","-o-","-moz-","-ms-"];e.cssName=function(a,b,c){if(wa[a])return wa[a];b=b||e.root.style||{};for(var d=0,f=Kc.length;d<f;d++)if(c=e.camelize(Kc[d]+a),c in b)return wa[a]=c;return null};e.css=function(a,b,c,d){a instanceof e&&(a=a[0]);if(1===a.nodeType){d=e.camelize(b);b=e.cssName(d)||d;if(void 0===c||"boolean"===typeof c)return d=t[d+":get"]||t["@:get"],"background"===b&&(b="backgroundColor"),a=d(a,b),!0===c?parseFloat(a)||0:a;""===c?a.style[b]="":null!=c&&c===c&&(isFinite(c)&&!e.cssNumber[d]&&(c+="px"),d=t[d+":set"]||t["@:set"],d(a,b,c))}};e.fn.css=function(a,b){if(e.isPlainObject(a))for(var c in a)e.css(this,c,a[c]);else var d=e.css(this,a,b);return void 0!==d?d:this};e.fn.position=function(){var a,b,c=this[0],d={top:0,left:0};if(!c)return d;"fixed"===this.css("position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),"HTML"!==a[0].tagName&&(d=a.offset()),d.top+=e.css(a[0],"borderTopWidth",!0),d.left+=e.css(a[0],"borderLeftWidth",!0),d.top-=a.scrollTop(),d.left-=a.scrollLeft());return{top:b.top-d.top-e.css(c,"marginTop",!0),left:b.left-d.left-e.css(c,"marginLeft",!0)}};e.fn.offsetParent=function(){for(var a=this[0].offsetParent;a&&"static"===e.css(a,"position");)a=a.offsetParent;return e(a||e.root)};t["@:set"]=function(a,b,c){try{a.style[b]=c}catch(d){}};t["@:get"]=function(a,b){if(!a||!a.style)throw Error("getComputedStyle\u8981\u6c42\u4f20\u5165\u4e00\u4e2a\u8282\u70b9 "+a);var c,d=y.getComputedStyle(a,null);d&&(c="filter"===b?d.getPropertyValue(b):d[b],""===c&&(c=a.style[b]));return c};t["opacity:get"]=function(a){a=t["@:get"](a,"opacity");return""===a?"1":a};"top,left".replace(e.rword,function(a){t[a+":get"]=function(b){var c=t["@:get"](b,a);return/px$/.test(c)?c:e(b).position()[a]+"px"}});var Ib={position:"absolute",visibility:"hidden",display:"block"},ud=/^(none|table(?!-c[ea]).+)/;e.each({Width:"width",Height:"height"},function(a,b){var c="client"+a,d="scroll"+a,f="offset"+a;t[b+":get"]=function(b,c,d){var l=-4;"number"===typeof d&&(l=d);c="Width"===a?["Left","Right"]:["Top","Bottom"];d=b[f];if(2===l)return d+e.css(b,"margin"+c[0],!0)+e.css(b,"margin"+c[1],!0);0>l&&(d=d-e.css(b,"border"+c[0]+"Width",!0)-e.css(b,"border"+c[1]+"Width",!0));-4===l&&(d=d-e.css(b,"padding"+c[0],!0)-e.css(b,"padding"+c[1],!0));return d};t[b+"\x26get"]=function(a){var c=[];Hb(a,c);for(var d=t[b+":get"](a),f=0,e;e=c[f++];){a=e.node;for(var m in e)"string"===typeof e[m]&&(a.style[m]=e[m])}return d};e.fn[b]=function(e){var g=this[0];if(0===arguments.length){if(g.setTimeout)return g["inner"+a]||g.document.documentElement[c]||g.document.body[c];if(9===g.nodeType){var k=g.documentElement;return Math.max(g.body[d],k[d],g.body[f],k[f],k[c])}return t[b+"\x26get"](g)}return this.css(b,e)};e.fn["inner"+a]=function(){return t[b+":get"](this[0],void 0,-2)};e.fn["outer"+a]=function(a){return t[b+":get"](this[0],void 0,!0===a?2:0)}});if(9>A){e.shadowCopy(wa,K("float","styleFloat"));var $e=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,af=/^(top|right|bottom|left)$/,Lc=/alpha\([^)]+\)/i,bf=/(opacity|\d(\d|\.)*)/g,nb=8===A,cf={thin:nb?"1px":"2px",medium:nb?"3px":"4px",thick:nb?"5px":"6px"};t["@:get"]=function(a,b){var c=a.currentStyle,d=c[b];if($e.test(d)&&!af.test(d)){var f=a.style,e=f.left,g=a.runtimeStyle.left;a.runtimeStyle.left=c.left;f.left="fontSize"===b?"1em":d||0;d=f.pixelLeft+"px";f.left=e;a.runtimeStyle.left=g}"medium"===d&&(b=b.replace("Width","Style"),"none"===c[b]&&(d="0px"));return""===d?"auto":cf[d]||d};t["opacity:set"]=function(a,b,c){a=a.style;c=1>=Number(c)?"alpha(opacity\x3d"+100*c+")":"";b=a.filter||"";a.zoom=1;a.filter=(Lc.test(b)?b.replace(Lc,c):b+" "+c).trim();a.filter||a.removeAttribute("filter")};t["opacity:get"]=function(a){a=a.style.filter.match(bf)||[];for(var b=!1,c=0,d;d=a[c++];)if("opacity"===d)b=!0;else if(b)return d/100+"";return"1"}}e.fn.offset=function(){var a=this[0],b={left:0,top:0};if(!a||!a.tagName||!a.ownerDocument)return b;var c=a.ownerDocument,d=c.body,f=c.documentElement,c=c.defaultView||c.parentWindow;if(!e.contains(f,a))return b;a.getBoundingClientRect&&(b=a.getBoundingClientRect());return{top:b.top+Math.max(c.pageYOffset||0,f.scrollTop,d.scrollTop)-(f.clientTop||d.clientTop),left:b.left+Math.max(c.pageXOffset||0,f.scrollLeft,d.scrollLeft)-(f.clientLeft||d.clientLeft)}};e.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){e.fn[a]=function(c){var d=this[0]||{},f=d.window||d.defaultView||d.parentWindow||!1,h=e.root,g="scrollTop"===a;if(arguments.length)f?f.scrollTo(g?e(f).scrollLeft():c,g?c:e(f).scrollTop()):d[a]=c;else return f?b in f?f[b]:h[a]:d[a]}});var ob={"option:get":A?vd:function(a){return a.value},"select:get":function(a,b){for(var c,d=a.options,f=a.selectedIndex,e=ob["option:get"],g="select-one"===a.type||0>f,k=g?null:[],l=g?f+1:d.length,n=0>f?l:g?f:0;n<l;n++)if(c=d[n],!(!c.selected&&n!==f||c.disabled||c.parentNode.disabled&&"OPTGROUP"===c.parentNode.tagName)){b=e(c);if(g)return b;k.push(b)}return k},"select:set":function(a,b,c){b=[].concat(b);for(var d=ob["option:get"],f=0,e;e=a.options[f++];)if(e.selected=-1<b.indexOf(d(e)))c=!0;c||(a.selectedIndex=-1)}};e.fn.val=function(a){var b=this[0];if(b&&1===b.nodeType){var c=0===arguments.length,d=c?":get":":set",f=ob,e;e=b.tagName.toLowerCase();e="input"===e?Ga.test(b.type)?"checked":b.type:e;if(d=f[e+d])var g=d(b,a);else{if(c)return(b.value||"").replace(/\r/g,"");b.value=a}}return c?g:this};var Nb={area:1,base:1,basefont:1,bgsound:1,br:1,col:1,command:1,embed:1,frame:1,hr:1,img:1,input:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1};K("div,ul,ol,dl,table,h1,h2,h3,h4,h5,h6,form,fieldset");M("tr,style,script");M("option,optgroup,#text");M("option,#text");M("#text");M("th,td,style,script");M("col");M("base,basefont,bgsound,link,style,script,meta,title,noscript,noframes");K("head,body");var Lb={xmp:1,style:1,script:1,noscript:1,textarea:1,"#comment":1,template:1},Fd={style:1,script:1,noscript:1,template:1},Mb=/\S/,Ed=/\s/;e.lexer=function(a){return da(a)};var Jb=new G(100),Cd=/^(tbody|thead|tfoot)$/,Dd=/\<(\w[^\s\/\>]*)/,df=/<|&#?\w+;/,Mc=new G(128),ef=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig;e.parseHTML=function(a){var b=m.createDocumentFragment();if("string"!==typeof a)return b;if(!df.test(a))return m.createTextNode(a);a=a.replace(ef,"\x3c$1\x3e\x3c/$2\x3e").trim();var c=Mc.get(a);if(c)return e.cloneNode(c);for(var c=da(a),d=0,f;f=c[d++];)f=e.vdom(f,"toDOM"),b.appendChild(f);1024>a.length&&Mc.put(a,b);return b};e.innerHTML=function(a,b){var c=e.parseHTML(b);this.clearHTML(a);a.appendChild(c)};e.unescapeHTML=function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"\x3c").replace(/&gt;/g,"\x3e").replace(/&amp;/g,"\x26")};e.clearHTML=function(a){for(;a.lastChild;)a.removeChild(a.lastChild);return a};var ja={click:!0,dblclick:!0,keydown:!0,keypress:!0,keyup:!0,mousedown:!0,mousemove:!0,mouseup:!0,mouseover:!0,mouseout:!0,wheel:!0,mousewheel:!0,input:!0,change:!0,beforeinput:!0,compositionstart:!0,compositionupdate:!0,compositionend:!0,select:!0,cut:!0,copy:!0,paste:!0,beforecut:!0,beforecopy:!0,beforepaste:!0,focusin:!0,focusout:!0,DOMFocusIn:!0,DOMFocusOut:!0,DOMActivate:!0,dragend:!0,datasetchanged:!0},ff=e.modern&&m.ontouchstart;e.fn.bind=function(a,b,c){if(this[0])return e.bind(this[0],a,b,c)};e.fn.unbind=function(a,b,c){if(this[0]){var d=ua.call(arguments);d.unshift(this[0]);e.unbind.apply(0,d)}return this};e.bind=function(a,b,c){if(1===a.nodeType){var d=a.getAttribute("avalon-events")||"",f=C(c),h=P[b];"click"===b&&ff&&a.addEventListener("click",e.noop);h&&(b=h.type||b,h.fix&&(c=h.fix(a,c),c.uuid=f));f=b+":"+f;e.eventListeners[c.uuid]=c;-1===d.indexOf(b+":")&&(ja[b]||e.modern&&Qb[b]?Hd(b):e._nativeBind(a,b,Ja));b=d.split(",");""===b[0]&&b.shift();-1===b.indexOf(f)&&(b.push(f),Ia(a,b.join(",")));return c}d=function(b){c.call(a,new ka(b))};e._nativeBind(a,b,d);return d};e.unbind=function(a,b,c){if(1===a.nodeType){var d=a.getAttribute("avalon-events")||"";switch(arguments.length){case 1:e._nativeUnBind(a,b,Ja);a.removeAttribute("avalon-events");break;case 2:d=d.split(",").filter(function(a){return-1===a.indexOf(b+":")}).join(",");Ia(a,d);break;default:var f=b+":"+c.uuid,d=d.split(",").filter(function(a){return a!==f}).join(",");Ia(a,d);delete e.eventListeners[c.uuid]}}else e._nativeUnBind(a,b,c)};var Pb={},Gd=/^e/,Qb={focus:!0,blur:!0},Rb={webkitMovementY:1,webkitMovementX:1,keyLocation:1,fixEvent:function(){},preventDefault:function(){var a=this.originalEvent||{};a.returnValue=this.returnValue=!1;O&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent||{};a.cancelBubble=this.cancelBubble=!0;O&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.stopPropagation();this.stopImmediate=!0},toString:function(){return"[object Event]"}};ka.prototype=Rb;"onmouseenter"in E||e.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){P[a]={type:b,fix:function(b,d){return function(e){var h=e.relatedTarget;if(!h||h!==b&&!(b.compareDocumentPosition(h)&16))return delete e.type,e.type=a,d.apply(this,arguments)}}}});e.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(a,b){y[a]&&!P.animationend&&(P.animationend={type:b})});if(!("onmousewheel"in m)){var Nc=void 0!==m.onwheel?"wheel":"DOMMouseScroll",gf="wheel"===Nc?"deltaY":"detail";P.mousewheel={type:Nc,fix:function(a,b){return function(c){c.wheelDelta=~~a._ms_wheel_+(0<c[gf]?-120:120);a._ms_wheel_=c.wheelDeltaY=c.wheelDelta;c.wheelDeltaX=0;Object.defineProperty&&Object.defineProperty(c,"type",{value:"mousewheel"});return b.apply(this,arguments)}}}}O||(delete ja.change,delete ja.select);e._nativeBind=O?function(a,b,c,d){a.addEventListener(b,c,!!d)}:function(a,b,c){a.attachEvent("on"+b,c)};e._nativeUnBind=O?function(a,b,c,d){a.removeEventListener(b,c,!!d)}:function(a,b,c){a.detachEvent("on"+b,c)};e.fireDom=function(a,b,c){if(m.createEvent){var d=m.createEvent("Events");d.initEvent(b,!0,!0,c);e.shadowCopy(d,c);a.dispatchEvent(d)}else if(E.contains(a)){d=m.createEventObject();c&&e.shadowCopy(d,c);try{a.fireEvent("on"+b,d)}catch(f){e.log("fireDom",b,"args error")}}};var hf=/^(?:mouse|contextmenu|drag)|click/;ka.prototype.fixEvent=function(){null==this.which&&0===this.type.indexOf("key")&&(this.which=null!=this.charCode?this.charCode:this.keyCode);if(hf.test(this.type)&&!("pageX"in this)){var a=this.target.ownerDocument||m,a="BackCompat"===a.compatMode?a.body:a.documentElement;this.pageX=this.clientX+(a.scrollLeft>>0)-(a.clientLeft>>0);this.pageY=this.clientY+(a.scrollTop>>0)-(a.clientTop>>0);this.wheelDeltaY=~~this.wheelDelta;this.wheelDeltaX=0}};"oninput"in m.createElement("input")||(P.input={type:"propertychange",fix:function(a,b){return function(a){if("value"===a.propertyName)return a.type="input",b.apply(this,arguments)}}});var Sb=[];e.ready=function(a){Sb.push(a);e.isReady&&T()};e.ready(function(){e.scan&&e.scan(m.body)});B&&Id();var Ub={script:1,style:1,textarea:1,xmp:1,noscript:1,template:1},Kd=/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi,Jd=/input|textarea|select/i;Ka.prototype={constructor:Ka,toDOM:function(){if(this.dom)return this.dom;var a=e._decode(this.nodeValue);return this.dom=m.createTextNode(a)},toHTML:function(){return this.nodeValue}};La.prototype={constructor:La,toDOM:function(){return this.dom?this.dom:this.dom=m.createComment(this.nodeValue)},toHTML:function(){return"\x3c!--"+this.nodeValue+"--\x3e"}};Ma.prototype={constructor:Ma,toDOM:function(){if(this.dom)return this.dom;var a,b=this.nodeName;a=e.modern&&jf[b]?m.createElementNS("http://www.w3.org/2000/svg",b):e.modern||!kf[b]&&!lf.test(b)?m.createElement(b):Md(b);var b=this.props||{},c;for(c in b){var d=b[c];if(!1!==d&&Object(d)!==d)if(Oc[c]&&8>e.msie)Oc[c](a,d);else a.setAttribute(c,d+"")}var f=this.children||[];c=f[0]?f[0].nodeValue:"";switch(this.nodeName){case "script":a.type="noexec";a.text=c;try{a.innerHTML=c}catch(h){}a.type=b.type||"";break;case "noscript":a.textContent=c;case "style":case "xmp":case "template":try{a.innerHTML=c}catch(h){Ld(a,this.nodeName,c)}break;case "option":9>A&&(a.text=c);default:!this.isVoidTag&&this.children&&this.children.forEach(function(b){return f&&a.appendChild(e.vdom(f,"toDOM"))})}return this.dom=a},toHTML:function(){var a=[],b=this.props||{},c;for(c in b){var d=b[c];!1!==d&&Object(d)!==d&&a.push(c+"\x3d"+e.quote(b[c]+""))}a=a.length?" "+a.join(" "):"";a="\x3c"+this.nodeName+a;if(this.isVoidTag)return a+"/\x3e";a+="\x3e";this.children&&(a+=this.children.map(function(a){return a?e.vdom(a,"toHTML"):""}).join(""));return a+"\x3c/"+this.nodeName+"\x3e"}};var Oc={"class":function(a,b){a.className=b},style:function(a,b){a.style.cssText=b},type:function(a,b){try{a.type=b}catch(c){}},"for":function(a,b){a.setAttribute("for",b);a.htmlFor=b}},jf=e.oneObject("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use,g,svg"),lf=/^\w+\:\w+/,kf=e.oneObject("shape,line,polyline,rect,roundrect,oval,arc,curve,background,image,shapetype,group,fill,stroke,shadow, extrusion, textbox, imagedata, textpath");ea.prototype={constructor:ea,toDOM:function(){if(this.dom)return this.dom;var a=this.toFragment();this.split=a.lastChild;return this.dom=a},dispose:function(){this.toFragment();this.innerRender&&this.innerRender.dispose();for(var a in this)this[a]=null},toFragment:function(){var a=m.createDocumentFragment();this.children.forEach(function(b){return a.appendChild(e.vdom(b,"toDOM"))});return a},toHTML:function(){return this.children.map(function(a){return e.vdom(a,"toHTML")}).join("")}};e.mix(e,{VText:Ka,VComment:La,VElement:Ma,VFragment:ea});var mf={"#text":"VText","#document-fragment":"VFragment","#comment":"VComment"};e.vdomAdaptor=e.vdom=function(a,b){if(!a)return"toHTML"===b?"":m.createDocumentFragment();var c=a.nodeName;return c?e[mf[c]||"VElement"].prototype[b].call(a):(new e.VFragment(a))[b]()};e.domize=function(a){return e.vdom(a,"toDOM")};e.pendingActions=[];e.uniqActions={};e.inTransaction=0;u.trackDeps=!1;e.track=function(){u.trackDeps&&e.log.apply(e,arguments)};var Wb=[];e.transaction=function(a,b,c){c=c||[];e.inTransaction+=1;a=a.apply(b,c);0===--e.inTransaction&&(e.isRunningActions=!1,Na());return a};var Nd=0,Oa={map:{}},Qa=/\?\?\d+/g,nf=e.oneObject("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments"),Sd=e.mix({Math:1,Date:1,$event:1,window:1,__vmodel__:1,avalon:1},nf),Xd=/(^|[^\w\u00c0-\uFFFF_])(@|##)(?=[$\w])/g,Vd=/\s*(\.|\|)\s*/g,Ud=/\|\|/g,$d=/\(([^)]*)\)/,Zd=/\|(?=\?\?)/,Td=/(^|[^/])\/(?!\/)(\[.+?]|\\.|[^/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/g,Qd=/\.[\w\.\$]+/g,Wd=/(\{|\,)\s*([\$\w]+)\s*:/g,Yd=/\|(\w+)/g,Rd=/[$a-zA-Z_][$a-zA-Z0-9_]*/g,Yb=new G(300),ae=/^__vmodel__\.[$\w\.]+$/,be=/__vmodel__\.([^(]+)\(([^)]*)\)/,de=1;Sa.prototype={getValue:function(){var a=this.vm;try{return this.getter.call(a,a)}catch(b){e.log(this.getter+" exec error")}},setValue:function(a){var b=this.vm;this.setter&&this.setter.call(b,b,a)},get:function(a){this.deep&&(e.deepCollect=!0);a=Vb(this,this.getValue);this.deep&&e.deepCollect&&(e.deepCollect=!1);return a},beforeUpdate:function(){return this.oldValue=Ta(this.value)},update:function(a,b){var c=this.beforeUpdate(),d=this.value=this.get(),e=this.callback;e&&this.diff(d,c,a)&&e.call(this.vm,this.value,c,this.expr);this._isScheduled=!1},schedule:function(){this._isScheduled||(this._isScheduled=!0,e.uniqActions[this.uuid]||(e.uniqActions[this.uuid]=1,e.pendingActions.push(this)),Na())},removeDepends:function(){var a=this;this.observers.forEach(function(b){e.Array.remove(b.observers,a)})},diff:function(a,b){return a!==b},dispose:function(){this.value=null;this.removeDepends();this.beforeDispose&&this.beforeDispose();for(var a in this)delete this[a]}};var ce={vm:1,callback:1,observers:1,oldValue:1,value:1,getValue:1,setValue:1,get:1,removeDepends:1,beforeUpdate:1,update:1,dispose:1},ee=1;fa.prototype={get:function(){if(e.trackingAction){this.collect();var a=this.value;if(a&&a.$events)if(Array.isArray(a))a.forEach(function(a){a&&a.$events&&a.$events.__dep__.collect()});else if(e.deepCollect)for(var b in a)a.hasOwnProperty(b)}return this.value},collect:function(){e.track(name,"\u88ab\u6536\u96c6");var a=e.trackingAction||null;null!==a&&(e.track("\u5f81\u6536\u5230",this.expr),a.mapIDs[this.uuid]=this)},updateVersion:function(){this.version=Math.random()+Math.random()},notify:function(){e.inTransaction+=1;for(var a=this.observers,b=0,c;c=a[b++];)c.schedule();0===--e.inTransaction&&(e.isRunningActions=!1,Na())},set:function(a){var b=this.value;if(a!==b){if(e.isObject(a)){var b=b&&b.$hashcode,c=p.createProxy(a,this);c&&(b&&(c.$hashcode=b),a=c)}this.value=a;this.updateVersion();this.notify()}}};var of=/(\?|if\b|\(.+\))/,je=function(a){function b(b,c,h){a.call(this,b,void 0,h);delete c.get;delete c.set;e.mix(this,c);this.deps={};this.type="computed";this.depsVersion={};this.isComputed=!0;this.trackAndCompute();"isStable"in this||(this.isStable=!of.test(fe(this.getter)))}he(b,a);var c=b.prototype;c.trackAndCompute=function(){this.isStable&&0<this.depsCount?this.getValue():Vb(this,this.getValue.bind(this))};c.getValue=function(){return this.value=this.getter.call(this.vm)};c.schedule=function(){for(var a=this.observers,b=a.length;b--;){var c=a[b];c.schedule&&c.schedule()}};c.shouldCompute=function(){if(this.isStable){var a=!1,b;for(b in this.deps)this.deps[b].version!==this.depsVersion[b]&&(a=!0,this.depsVersion[b]=this.deps[b].version);return a}return!0};c.set=function(){this.setter&&e.transaction(this.setter,this.vm,arguments)};c.get=function(){this.collect();this.shouldCompute()&&(this.trackAndCompute(),this.updateVersion());return this.value};return b}(fa);e.define=function(a){var b=a.$id;b||e.error("vm.$id must be specified");e.vmodels[b]&&e.warn("error:["+b+"] had defined!");a=p.modelFactory(a);return e.vmodels[b]=a};p.modelFactory=function(a,b){var c=a.$computed||{};delete a.$computed;var d=new Ua(a,b),f=d.$accessors,h=[];p.hideProperty(d,"$mutations",{});for(var g in a)if(!(g in F)){var k=a[g];h.push(g);ie(g,k)&&(f[g]=Va(g,k))}for(var l in c)l in F||(k=c[l],"function"===typeof k&&(k={get:k}),k&&k.get&&(k.getter=k.get,k.setter=k.set,e.Array.ensure(h,l),f[l]=Va(l,k,!0)));c=p.createViewModel(d,f,d);p.afterCreate(c,d,h,!b);return c};var $b={};p.createProxy=function(a,b){if(a&&a.$events)return a;var c;Array.isArray(a)?c=p.listFactory(a,!1,b):Q(a)&&(c=p.modelFactory(a,b));return c};p.itemFactory=function(a,b){var c=a.$model,d=new Ua(c),f=e.shadowCopy(d.$accessors,a.$accessors),h=b.data,g;for(g in h){var k=c[g]=d[g]=h[g];f[g]=Va(g,k)}c=Object.keys(c);f=p.createViewModel(d,f,d);p.afterCreate(f,d,c);return f};p.fuseFactory=function(a,b){var c=e.mix(a.$model,b.$model),d=new Ua(e.mix(c,{$id:a.$id+b.$id})),f=e.mix(d.$accessors,a.$accessors,b.$accessors),c=Object.keys(c),f=p.createViewModel(d,f,d);p.afterCreate(f,d,c,!1);return f};var Zb={get:function(){return la(this)},set:e.noop,enumerable:!1,configurable:!0};p.toJson=la;p.modelAccessor=Zb;var Pc=N.splice,pb={set:function(a,b){if(a>>>0===a&&this[a]!==b){if(a>this.length)throw Error(a+"set\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e0d\u80fd\u5927\u4e8e\u539f\u6570\u7ec4\u957f\u5ea6");this.splice(a,1,b)}},toJSON:function(){return this.$model=p.toJson(this)},contains:function(a){return-1!==this.indexOf(a)},ensure:function(a){return this.contains(a)?!1:(this.push(a),!0)},pushArray:function(a){return this.push.apply(this,a)},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){return a>>>0===a?this.splice(a,1):[]},clear:function(){this.removeAll();return this},removeAll:function(a){var b=Array.isArray(a)?function(b){return-1!==a.indexOf(b)}:"function"===typeof a?a:!1;if(b)for(var c=this.length-1;0<=c;c--)b(this[c],c)&&Pc.call(this,c,1);else Pc.call(this,0,this.length);this.toJSON();this.$events.__dep__.notify()}};"push pop shift unshift splice sort reverse".split(" ").forEach(function(a){var b=N[a];pb[a]=function(){var c=this.$events,d=p.listFactory(arguments,!0,c.__dep__),d=b.apply(this,d);this.toJSON();c.__dep__.notify(a);return d}});p.listFactory=function(a,b,c){if(!b){for(var d in pb)p.hideProperty(a,d,pb[d]);O&&Object.defineProperty(a,"$model",p.modelAccessor);p.hideProperty(a,"$hashcode",e.makeHashCode("$"));p.hideProperty(a,"$events",{__dep__:c||new fa})}b=a.$events&&a.$events.__dep__;c=0;for(d=a.length;c<d;c++){var f=a[c];Q(f)&&(a[c]=p.createProxy(f,b))}return a};var Wa=!0;try{Object.defineProperty({},"_",{value:"x"}),delete F.$vbsetter,delete F.$vbthis}catch(a){Wa=!1}var ke={$vbthis:1,$vbsetter:1};p.hideProperty=ac;p.fireFactory=function(a){return function(b,c){var d=a[b];if(Array.isArray(d))for(var e=0,h;h=d[e++];)h.callback.call(h.vm,c,h.value,h.expr)}};p.watchFactory=function(a){return function(b,c,d){var f=new Sa(a.__proxy__,{deep:d,type:"user",expr:b},c);a[b]?a[b].push(f):a[b]=[f];return function(){f.dispose();e.Array.remove(a[b],f);0===a[b].length&&delete a[b]}}};p.afterCreate=function(a,b,c,d){function f(b){return-1<("\u2625"+a.$track+"\u2625").indexOf("\u2625"+b+"\u2625")}var h=a.$accessors,g;for(g in F)9>e.msie&&void 0===b[g]||ac(a,g,b[g]);for(g=0;g<c.length;g++){var k=c[g];if(!(k in h)){var l=b[k];d&&"function"===typeof l?(a[k]=l.bind(a),a[k]._orig=l):a[k]=l}}a.$track=c.join("\u2625");9>e.msie&&(a.hasOwnProperty=f);a.$events.__proxy__=a};var qb=Object.defineProperties,Qc,I=new Date-0;if(!Wa&&("__defineGetter__"in e&&(Qc=function(a,b,c){"value"in c&&(a[b]=c.value);"get"in c&&a.__defineGetter__(b,c.get);"set"in c&&a.__defineSetter__(b,c.set);return a},qb=function(a,b){for(var c in b)b.hasOwnProperty(c)&&Qc(a,c,b[c]);return a}),9>A)){var Rc={};window.execScript("Function parseVB(code)\n\tExecuteGlobal(code)\nEnd Function","VBScript");var pf=function(a,b,c,d){var e=b[c];if(4===arguments.length)e.set.call(a,d);else return e.get.call(a)},qb=function(a,b,c){var d=[];d.push("\tPrivate [$vbsetter]","\tPublic  [$accessors]","\tPublic Default Function [$vbthis](ac"+I+", s"+I+")","\t\tSet  [$accessors] \x3d ac"+I+": set [$vbsetter] \x3d s"+I,"\t\tSet  [$vbthis]    \x3d Me","\tEnd Function");var f={$vbthis:!0,$vbsetter:!0,$accessors:!0};for(a in F)f[a]||(d.push("\tPublic ["+a+"]"),f[a]=!0);for(a in b)f[a]||(f[a]=!0,d.push("\tPublic Property Let ["+a+"](val"+I+")",'\t\tCall [$vbsetter](Me, [$accessors], "'+a+'", val'+I+")","\tEnd Property","\tPublic Property Set ["+a+"](val"+I+")",'\t\tCall [$vbsetter](Me, [$accessors], "'+a+'", val'+I+")","\tEnd Property","\tPublic Property Get ["+a+"]","\tOn Error Resume Next","\t\tSet["+a+'] \x3d [$vbsetter](Me, [$accessors],"'+a+'")',"\tIf Err.Number \x3c\x3e 0 Then","\t\t["+a+'] \x3d [$vbsetter](Me, [$accessors],"'+a+'")',"\tEnd If","\tOn Error Goto 0","\tEnd Property"));for(a in c)f[a]||(f[a]=!0,d.push("\tPublic ["+a+"]"));d.push("\tPublic [hasOwnProperty]");d.push("End Class");a=d.join("\r\n");c=Rc[a];c||(c=e.makeHashCode("VBClass"),window.parseVB("Class "+c+a),window.parseVB(["Function "+c+"Factory(acc, vbm)","\tDim o","\tSet o \x3d (New "+c+")(acc, vbm)","\tSet "+c+"Factory \x3d o","End Function"].join("\r\n")),Rc[a]=c);return window[c+"Factory"](b,pf)}}p.createViewModel=qb;var qf=e.directive("important",{priority:1,getScope:function(a,b){var c=e.vmodels[a];if(c)return c;throw"error! no vmodel called "+a;},update:function(a,b,c){e.inBrowser&&(a=e.vdom(a,"toDOM"),1===a.nodeType&&(a.removeAttribute(b),e(a).removeClass("ms-controller")),b=e.vmodels[c])&&(b.$element=a,b.$render=this,b.$fire("onReady"),delete b.$events.onReady)}}).update;e.directive("controller",{priority:2,getScope:function(a,b){var c=e.vmodels[a];return c?(c.$render=this,b&&b!==c?p.fuseFactory(b,c):c):b},update:qf});e.directive("skip",{delay:!0});var Sc={},rb=e.directive("css",{diff:function(a,b){if(Object(a)===a){a=p.toJson(a);if(Array.isArray(a)){var c={};a.forEach(function(a){a&&e.shadowCopy(c,a)});a=c;Sc[this.type]||(e.warn("ms-"+this.type+"\u6307\u4ee4\u7684\u503c\u4e0d\u5efa\u8bae\u4f7f\u7528\u6570\u7ec4\u5f62\u5f0f\u4e86\uff01"),Sc[this.type]=1)}var d=!1,f={};if(b){if(this.deep)for(var h in a){if(!Xa(a[h],b[h],4))return this.value=a,!0;f[h]=a[h]}else for(var g in a)a[g]!==b[g]&&(d=!0),f[g]=a[g];for(var k in b)k in f||(d=!0,f[k]="")}else f=a,d=!0;if(d)return this.value=f,!0}return!1},update:function(a,b){var c=a.dom;if(c&&1===c.nodeType){var c=e(c),d;for(d in b)c.css(d,b[d])}}}).diff,Z={TransitionEvent:"transitionend",WebKitTransitionEvent:"webkitTransitionEnd",OTransitionEvent:"oTransitionEnd",otransitionEvent:"otransitionEnd"},ma=void 0,xa=void 0,sb=void 0,J=void 0,ab=void 0,$a=void 0;for(J in Z){if(y[J]){xa=Z[J];break}try{document.createEvent(J);xa=Z[J];break}catch(a){}}"string"===typeof xa&&(ma=!0,$a=xa);Z={AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"};for(J in Z)if(y[J]){sb=Z[J];break}"string"===typeof sb&&(ma=!0,ab=sb);var rf=e.directive("effect",{priority:5,diff:function(a){var b=this.node;"string"===typeof a&&(this.value=a={is:a},e.warn("ms-effect\u7684\u6307\u4ee4\u503c\u4e0d\u518d\u652f\u6301\u5b57\u7b26\u4e32,\u5fc5\u987b\u662f\u4e00\u4e2a\u5bf9\u8c61"));this.value=b.effect=a;var c=this;return rb.call(this,a,this.oldValue)?(setTimeout(function(){b.animating=!0;rf.update.call(c,b,b.effect)}),b.animating=!1,!0):!1},update:function(a,b,c){if((a=a.dom)&&1===a.nodeType){b=b||c;c=b.is;var d=e.effects[c];if(d){var f={},h=sf[b.action];if("function"!==typeof tb.prototype[h])e.warn("action is undefined");else{var g=new e.Effect(a);e.mix(f,d,b,{action:h});if(f.queue)Ya.push(function(){g[h](f)}),cc();else g[h](f);return!0}}else e.warn(c+" effect is undefined")}}}),sf={"true":"enter","false":"leave",enter:"enter",leave:"leave",move:"move",undefined:"enter"},Ya=[];e.effects={};e.effect=function(a,b){var c=e.effects[a]=b||{};ma&&!1!==c.css&&(c.enterClass||(c.enterClass=a+"-enter"),c.enterActiveClass||(c.enterActiveClass=c.enterClass+"-active"),c.leaveClass||(c.leaveClass=a+"-leave"),c.leaveActiveClass||(c.leaveActiveClass=c.leaveClass+"-active"));return c};var tb=function(a){this.dom=a};e.Effect=tb;tb.prototype={enter:Za("Enter"),leave:Za("Leave"),move:Za("Move")};var ec=new G(128);e.applyEffect=function(a,b,c){var d=c.cb,f=b.effect;if(f&&a&&1===a.nodeType){a=c.hook;var h=f[a];d&&(Array.isArray(h)?h.push(d):f[a]=h?[h,d]:[d]);c.action||(c.action=c.hook.replace(/^on/,"").replace(/Done$/,"").toLowerCase());e.directives.effect.update(b,f,e.shadowCopy({},c))}else d&&d(a)};var qe=e.cssName("transition-duration"),pe=e.cssName("animation-duration"),oe=/\d+s$/;e.parseDisplay=ga;e.directive("visible",{diff:function(a,b){var c=!!a;if(void 0===b||c!==b)return this.value=c,!0},ready:!0,update:function(a,b){var c=a.dom;if(c&&1===c.nodeType){var d=c.style.display,f;b?("none"===d&&(f=a.displayValue,f||(c.style.display="",""===c.style.cssText&&c.removeAttribute("style"))),""===c.style.display&&"none"===e(c).css("display")&&e.contains(c.ownerDocument,c)&&(f=ga(c))):"none"!==d&&(f="none",a.displayValue=d);e.applyEffect(c,a,{hook:b?"onEnterDone":"onLeaveDone",cb:function(){void 0!==f&&(c.style.display=f)}})}}});e.directive("text",{delay:!0,init:function(){var a=this.node;a.isVoidTag&&e.error("\u81ea\u95ed\u5408\u5143\u7d20\u4e0d\u80fd\u4f7f\u7528ms-text");var b={nodeName:"#text",nodeValue:this.getValue()};a.children.splice(0,a.children.length,b);B&&(e.clearHTML(a.dom),a.dom.appendChild(e.vdom(b,"toDOM")));this.node=b;this.type=this.name="expr";var c=e.directives.expr,d=this;this.callback=function(a){c.update.call(d,d.node,a)}}});e.directive("expr",{update:function(a,b){b=null==b||""===b?"\u200b":b;a.nodeValue=b;a.dom&&(a.dom.data=b)}});e.directive("attr",{diff:rb,update:function(a,b){var c=a.props,d;for(d in b)!1===!!b[d]?delete c[d]:c[d]=b[d];if((c=a.dom)&&1===c.nodeType)for(var f in b)try{var h=b[f];if(0===f.indexOf("data-")||Ye.test(c))c.setAttribute(f,h);else{var g=va[f]||f;"boolean"===typeof c[g]&&("checked"===g&&(c.defaultChecked=!!h),c[g]=!!h);if(!1===h)c.removeAttribute(g);else if(8>e.msie&&/[A-Z]/.test(g))c[g]=h+"";else{var k;if(k=!e.modern){d=c;var l=d.nodeName;k=l.toLowerCase()===l&&!!d.scopeName&&""===d.outerText}var n;if(!(n=k)){var r=c.nodeName;d=r+":"+f;n=d in mb?mb[d]:mb[d]=f in m.createElement(r)}n?(("href"===f||"src"===f)&&8>e.msie&&(h=String(h).replace(Ze,"\x26")),c[g]=h+""):c.setAttribute(f,h)}}}catch(q){e.log(String(q.message).trim(),f,h)}}});e.directive("html",{update:function(a,b){this.beforeDispose();this.innerRender=e.scan('\x3cdiv class\x3d"ms-html-container"\x3e'+b+"\x3c/div\x3e",this.vm,function(){var b=this.root;a.children&&(a.children.length=0);a.children=b.children;this.root=a;a.dom&&e.clearHTML(a.dom)})},beforeDispose:function(){this.innerRender&&this.innerRender.dispose()},delay:!0});e.directive("if",{delay:!0,priority:5,init:function(){this.placeholder=m.createComment("if");var a=this.node.props;delete a["ms-if"];delete a[":if"];this.fragment=e.vdom(this.node,"toHTML")},diff:function(a,b){var c=!!a;if(void 0===b||c!==b)return this.value=c,!0},update:function(a,b){if(void 0===this.isShow&&b)gc(this,a);else{this.isShow=b;var c=this.placeholder;if(b){var d=c.parentNode;gc(this,a);d&&d.replaceChild(a.dom,c)}else{this.beforeDispose();a.nodeValue="if";a.nodeName="#comment";delete a.children;var e=a.dom,d=e&&e.parentNode;a.dom=c;d&&d.replaceChild(c,e)}}},beforeDispose:function(){this.innerRender&&this.innerRender.dispose()}});e.directive("on",{beforeInit:function(){this.getter=e.noop},init:function(){var a=this.node,b=this.name.replace("ms-on-","e").replace("-","_")+"_"+this.expr.replace(/\s/g,"").replace(/[^$a-z]/ig,function(a){return a.charCodeAt(0)}),c=e.eventListeners[b];if(!c){var d=V(this.expr),c=d[0],d=d[1],c=Ra(c);d&&(d=d.replace(/__value__/g,"$event"),d+="\nif($event.$return){\n\treturn;\n}");c=["try{","\tvar __vmodel__ \x3d this;","\t"+d,"\treturn "+c,'}catch(e){avalon.log(e, "in on dir")}'].filter(function(a){return/\S/.test(a)});c=new Function("$event",c.join("\n"));c.uuid=b;e.eventListeners[b]=c}a=e.vdom(a,"toDOM");a._ms_context_=this.vm;this.eventType=this.param.replace(/\-(\d)$/,"");delete this.param;e(a).bind(this.eventType,c)},beforeDispose:function(){e(this.node.dom).unbind(this.eventType)}});var W={input:function(a){var b=this.dom;a=b[a||"value"];var c=this.parseValue(a);this.value=a;this.setValue(c);na(this);a=this.pos;b.caret&&this.setCaret(b,a)},radio:function(){this.isChecked?(this.setValue(!this.value),na(this)):(W.input.call(this),this.value=NaN)},checkbox:function(){var a=this.value;Array.isArray(a)||(e.warn("ms-duplex\u5e94\u7528\u4e8echeckbox\u4e0a\u8981\u5bf9\u5e94\u4e00\u4e2a\u6570\u7ec4"),a=[a]);var b=this.dom.checked?"ensure":"remove";if(a[b]){var c=this.parseValue(this.dom.value);a[b](c);na(this)}this.__test__=a},select:function(){var a=this,b=e(a.dom).val();b+""!==this.value+""&&(b=Array.isArray(b)?b.map(function(b){return a.parseValue(b)}):a.parseValue(b),a.setValue(b),na(a))},contenteditable:function(){W.input.call(this,"innerHTML")}},Tc=/\|\s*change\b/,Uc=/\|\s*debounce(?:\(([^)]+)\))?/,Vc=!0;try{var ub={},Wc=HTMLInputElement.prototype,Xc=HTMLTextAreaElement.prototype,Yc=function(a){ub[this.tagName].call(this,a);a=this._ms_duplex_;!this.caret&&a&&a.isString&&a.duplexCb.call(this,{type:"setter"})};Object.getOwnPropertyNames(HTMLInputElement.prototype);ub.INPUT=Object.getOwnPropertyDescriptor(Wc,"value").set;Object.defineProperty(Wc,"value",{set:Yc});ub.TEXTAREA=Object.getOwnPropertyDescriptor(Xc,"value").set;Object.defineProperty(Xc,"value",{set:Yc});Vc=!1}catch(a){}var X={input:function(){var a=this.node;a.dom.value=a.props.value=this.value+""},updateChecked:function(a,b){a.dom&&(a.dom.defaultChecked=a.dom.checked=b)},radio:function(){var a=this.node,b=a.props.value,b=this.isChecked?!!this.value:this.value+""===b;a.props.checked=b;X.updateChecked(a,b)},checkbox:function(){var a=this.node,b=a.props,c=b.value+"",d=[].concat(this.value).some(function(a){return a+""===c});b.defaultChecked=b.checked=d;X.updateChecked(a,d)},select:function(){var a=Array.isArray(this.value)?this.value.map(String):this.value+"";bb(this.node,a)},contenteditable:function(){for(var a=da(this.value),b=m.createDocumentFragment(),c=0,d;d=a[c++];)d=e.vdom(d,"toDOM"),b.appendChild(d);e.clearHTML(this.dom).appendChild(b);b=this.node.children;b.length=0;Array.prototype.push.apply(b,a);this.duplexCb.call(this.dom)}},tf=/\s+as\s+([$\w]+)/,uf=/^[$a-zA-Z_][$a-zA-Z0-9_]*$/,vf=/^(null|undefined|NaN|window|this|\$index|\$id)$/,wf=/[$\w_]+/g;e.directive("for",{delay:!0,priority:3,beforeInit:function(){var a=this.expr,b,a=a.replace(tf,function(a,c){!uf.test(c)||vf.test(c)?e.error("alias "+c+" is invalid --- must be a valid JS identifier which is not a reserved name."):b=c;return""}),a=a.split(" in "),c=a[0].match(wf);1===c.length&&c.unshift("$key");this.expr=a[1];this.keyName=c[0];this.valName=c[1];this.signature=e.makeHashCode("for");b&&(this.asName=b);delete this.param},init:function(){var a=this.userCb;"string"===typeof a&&a&&(a=V(a,"for"),a=Ra(a[0]),this.userCb=new Function("$event","var __vmodel__ \x3d this\nreturn "+a));this.node.forDir=this;this.fragment=["\x3cdiv\x3e",this.fragment,"\x3c!--",this.signature,"--\x3e\x3c/div\x3e"].join("");this.cache={}},diff:function(a,b){if(!this.updating){this.updating=!0;var c=se(this,a);if(void 0===this.oldTrackIds)return!0;if(this.oldTrackIds!==c)return this.oldTrackIds=c,!0}},update:function(){this.preFragments?(ue(this),ve(this)):(this.fragments=this.fragments||[],te(this));if(this.userCb){var a=this;setTimeout(function(){a.userCb.call(a.vm,{type:"rendered",target:a.begin.dom,signature:a.signature})},0)}delete this.updating},beforeDispose:function(){this.fragments.forEach(function(a){a.dispose()})}});e.directive("class",{diff:function(a,b){var c=this.type,d=this.node,e=d.classEvent||{};"hover"===c?(e.mouseenter=oa,e.mouseleave=ha):"active"===c&&(e.tabIndex=d.props.tabindex||-1,e.mousedown=oa,e.mouseup=ha,e.mouseleave=ha);d.classEvent=e;e=lc(a);if(b!==e)return this.value=e,d["change-"+c]=e,!0},update:function(a,b){var c=a.dom;if(c&&1==c.nodeType){var d=this.type,f="change-"+d,h=a.classEvent;if(h){for(var g in h)"tabIndex"===g?c[g]=h[g]:e.bind(c,g,h[g]);a.classEvent={}}["class","hover","active"].forEach(function(a){if(d===a)if("class"===a)c&&(a=c.getAttribute("change-class"),a!==b&&(e(c).removeClass(a).addClass(b),c.setAttribute("change-class",b)));else{var g=c.getAttribute(f);g&&e(c).removeClass(g);c.setAttribute("change-"+a,b)}})}}});z.active=z.hover=z["class"];var mc={mouseenter:"change-hover",mouseleave:"change-hover",mousedown:"change-active",mouseup:"change-active"};oa.uuid||(oa.uuid=Aa("e"));ha.uuid||(ha.uuid=Aa("e"));C(oc);C(pc);C(eb);C(fb);C(w);C(nc);C(H);C(pa);var xe=function(a){setTimeout(a,0)};e.directive("duplex",{priority:9999999,beforeInit:function(){var a=this.expr;Tc.test(a)&&(this.isChanged=!0,a=a.replace(Tc,""));var b=a.match(Uc);b&&(a=a.replace(Uc,""),this.isChanged||(this.debounceTime=parseInt(b[1],10)||300));this.expr=a},init:function(){var a=this.node,b=a.props.type;this.parseValue=re;var c=this.param,d,e=!1,c=c?c.split("-").map(function(a){"checked"===a&&(e=!0);return a}):[];a.duplex=this;Ga.test(b)&&e&&(c=[],d="radio",this.isChecked=e);this.parsers=c;/input|textarea|select/.test(a.nodeName)?d||(d="select"===a.nodeName?"select":"checkbox"===b?"checkbox":"radio"===b?"radio":"input"):"contenteditable"in a.props&&(d="contenteditable");this.dtype=d;"input"!==d&&"contenteditable"!==d?(delete this.isChanged,delete this.debounceTime):this.isChecked||(this.isString=!0);if(a=a.props["data-duplex-changed"])a=V(a,"xx"),a=Ra(a[0]),this.userCb=new Function("$event","var __vmodel__ \x3d this\nreturn "+a)},diff:function(a,b){if(Array.isArray(a)){if(a+""!==this.compareVal)return this.compareVal=a+"",!0}else if(a=this.parseValue(a),this.isChecked||(this.value=a+=""),a!==this.compareVal)return this.compareVal=a,!0},update:function(a,b){if(!this.dom){var c=a.dom;this.dom=c;this.vdom=a;this.duplexCb=w;c._ms_duplex_=this;var d={};switch(this.dtype){case "radio":case "checkbox":d.click=w;break;case "select":d.change=w;break;case "contenteditable":this.isChanged?d.blur=w:e.modern?(y.webkitURL?d.webkitEditableContentChanged=w:y.MutationEvent&&(d.DOMCharacterDataModified=w),d.input=w):(d.keydown=pa,d.paste=H,d.cut=H,d.focus=fb,d.blur=eb);break;case "input":this.isChanged?d.change=w:10>A?(d.propertychange=nc,d.paste=H,d.cut=H,d.keyup=pa):(d.input=w,d.compositionstart=eb,d.compositionend=fb,/\[native code\]/.test(y.Int8Array)||(d.keydown=pa,d.paste=H,d.cut=H,y.netscape&&(d.DOMAutoComplete=w)))}/password|text/.test(c.type)&&(d.focus=oc,d.blur=pc,this.getCaret=ye,this.setCaret=we);for(var f in d)e.bind(c,f,d[f])}qc.call(this,e.msie,Vc);X[this.dtype].call(this)}});e.__pollValue=qc;if(8>e.msie){var xf=X.updateChecked;X.updateChecked=function(a,b){var c=a.dom;c&&setTimeout(function(){xf(a,b);c.firstCheckedIt=1},c.firstCheckedIt?31:16)}}e.directive("rules",{diff:function(a){if(Q(a))return this.node.rules=p.toJson(a),!0}});var yf=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i,zf=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/;e.shadowCopy(e.validators,{pattern:{message:"\u5fc5\u987b\u5339\u914d{{pattern}}\u8fd9\u6837\u7684\u683c\u5f0f",get:function(a,b,c){var d=b.dom;b=b.data;"regexp"!==e.type(b.pattern)&&(d=d.getAttribute("pattern"),b.pattern=new RegExp("^(?:"+d+")$"));c(b.pattern.test(a));return a}},digits:{message:"\u5fc5\u987b\u6574\u6570",get:function(a,b,c){c(/^\-?\d+$/.test(a));return a}},number:{message:"\u5fc5\u987b\u6570\u5b57",get:function(a,b,c){c(!!a&&isFinite(a));return a}},norequired:{message:"",get:function(a,b,c){c(!0);return a}},required:{message:"\u5fc5\u987b\u586b\u5199",get:function(a,b,c){c(""!==a);return a}},equalto:{message:"\u5bc6\u7801\u8f93\u5165\u4e0d\u4e00\u81f4",get:function(a,b,c){b=e(document.getElementById(String(b.data.equalto))).val()||"";c(a===b);return a}},date:{message:"\u65e5\u671f\u683c\u5f0f\u4e0d\u6b63\u786e",get:function(a,b,c){b=b.data;if("regexp"===e.type(b.date))c(b.date.test(a));else{a:{if("string"===typeof a&&a){var d=a.split("-");if(3===d.length&&4===d[0].length){b=~~d[0];var f=~~d[1]-1,d=~~d[2],h=new Date(b,f,d);b=h.getFullYear()===b&&h.getMonth()===f&&h.getDate()===d;break a}}b=!1}c(b)}return a}},url:{message:"URL\u683c\u5f0f\u4e0d\u6b63\u786e",get:function(a,b,c){c(zf.test(a));return a}},email:{message:"email\u683c\u5f0f\u4e0d\u6b63\u786e",get:function(a,b,c){c(yf.test(a));return a}},minlength:{message:"\u6700\u5c11\u8f93\u5165{{minlength}}\u4e2a\u5b57",get:function(a,b,c){b=parseInt(b.data.minlength,10);c(a.length>=b);return a}},maxlength:{message:"\u6700\u591a\u8f93\u5165{{maxlength}}\u4e2a\u5b57",get:function(a,b,c){b=parseInt(b.data.maxlength,10);c(a.length<=b);return a}},min:{message:"\u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e{{min}}",get:function(a,b,c){b=parseInt(b.data.min,10);c(parseFloat(a)>=b);return a}},max:{message:"\u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e{{max}}",get:function(a,b,c){b=parseInt(b.data.max,10);c(parseFloat(a)<=b);return a}},chs:{message:"\u5fc5\u987b\u662f\u4e2d\u6587\u5b57\u7b26",get:function(a,b,c){c(/^[\u4e00-\u9fa5]+$/.test(a));return a}}});var aa=e.directive("validate",{diff:function(a){var b=this.node;if(!b.validator&&Q(a)){b.validator=a;a=p.toJson(a);a.vdom=b;a.dom=b.dom;for(var c in aa.defaults)a.hasOwnProperty(c)||(a[c]=aa.defaults[c]);a.fields=a.fields||[];b.vmValidator=a;return!0}},update:function(a){function b(){this&&aa.validateAll.call(this,this.onValidateAll)}var c=a.vmValidator,d=a.validator,f=a.dom;f._ms_validate_=c;ra(a.children,c.fields,c);e.bind(document,window.netscape?"keypress":"focusin",Ae);try{var h=c.onManual=b.bind(c);d.onManual=h}catch(g){e.warn("\u8981\u60f3\u4f7f\u7528onManual\u65b9\u6cd5\uff0c\u5fc5\u987b\u5728validate\u5bf9\u8c61\u9884\u5b9a\u4e49\u4e00\u4e2a\u7a7a\u7684onManual\u51fd\u6570")}delete a.vmValidator;f.setAttribute("novalidate","novalidate");c.validateAllInSubmit&&e.bind(f,"submit",ze)},validateAll:function(a){var b=this,c=this.vdom,d=b.fields=[];ra(c.children,d,b);var e="function"===typeof a?a:b.onValidateAll;a=b.fields.filter(function(a){return(a=a.dom)&&!a.disabled&&b.dom.contains(a)}).map(function(a){return aa.validate(a,!0)});var h={};return Promise.all(a).then(function(a){a=a.concat.apply([],a);b.deduplicateInValidateAll&&(a=a.filter(function(a){a=a.element;a=a.uniqueID||(a.uniqueID=setTimeout("1"));return h[a]?!1:h[a]=!0}));e.call(c.dom,a)})},validate:function(a,b,c){var d=[],f=a.value,h=a.dom;"function"!==typeof Promise&&e.warn("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u539f\u751fPromise,\u8bf7\u4e0b\u8f7d\u5e76\x3cscript src\x3durl\x3e\u5f15\u5165\nhttps://github.com/RubyLouvre/avalon/blob/master/test/promise.js");if(!h.disabled){var g=a.vdom.rules,k=[],l=!0;if(!g.norequired||""!==f)for(var n in g){var m=g[n];if(!1!==m){var q=e.validators[n],p;d.push(new Promise(function(a,b){p=a}));a.data={};a.data[n]=m;q.get(f,a,function(b){var c={element:h,data:a.data,message:h.getAttribute("data-"+n+"-message")||h.getAttribute("data-message")||q.message,validateRule:n,getMessage:Be};b?p(!0):(l=!1,k.push(c),p(!1))})}}return Promise.all(d).then(function(d){b||(d=a.validator,l?d.onSuccess.call(h,[{data:a.data,element:h}],c):d.onError.call(h,k,c),d.onComplete.call(h,k,c));return k})}}}),Ce=/\\?{{([^{}]+)\}}/gm;aa.defaults={validate:aa.validate,onError:e.noop,onSuccess:e.noop,onComplete:e.noop,onManual:e.noop,onReset:e.noop,onValidateAll:e.noop,validateInBlur:!0,validateInKeyup:!0,validateAllInSubmit:!0,resetInFocus:!0,deduplicateInValidateAll:!1};var Zc=e.oneObject("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit","on"),Af=/[+-\?]/,Bf=/__value__\)$/,uc={"#text":1,"#comment":1,script:1,style:1,noscript:1};e.scan=function(a,b,c){return new wc(a,b,c||e.noop)};wc.prototype={init:function(){var a;if(this.root&&0<this.root.nodeType)a=[Tb(this.root)],hb(this.root);else if("string"===typeof this.root)a=da(this.root);else return e.warn("avalon.scan first argument must element or HTML string");this.root=a[0];this.vnodes=a;this.scanChildren(a,this.vm,!0)},scanChildren:function(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];switch(e.nodeName){case "#text":b&&this.scanText(e,b);break;case "#comment":b&&this.scanComment(e,b,a);break;case "#document-fragment":this.scanChildren(e.children,b,!1);break;default:this.scanTag(e,b,a,!1)}}c&&this.complete()},scanText:function(a,b){u.rexpr.test(a.nodeValue)&&this.bindings.push([a,b,{nodeValue:a.nodeValue}])},scanComment:function(a,b,c){0===a.nodeValue.indexOf("ms-for:")&&this.getForBinding(a,b,c)},scanTag:function(a,b,c,d){var f={},h=a.props,g,k,l;for(l in h){var n=h[l],m=l;":"===l.charAt(0)&&(l="ms-"+l.slice(1));if(0===l.indexOf("ms-")){f[l]=n;var q=l.match(/\w+/g)[1],q=Zc[q]||q;z[q]||e.warn(l+" has not registered!");g=!0}"ms-for"===l&&(k=n,delete h[m])}var p=f["ms-important"]||f["ms-controller"];if(p){if(n=(l=e.serverTemplates)&&l[p]){e.log("\u524d\u7aef\u518d\u6b21\u6e32\u67d3\u540e\u7aef\u4f20\u8fc7\u6765\u7684\u6a21\u677f");var f=da(n)[0],t;for(t in f)a[t]=f[t];delete l[p];this.scanTag(a,b,c,d);return}var q=f["ms-important"]===p?"important":"controller",u="ms-"+q in h?"ms-"+q:":"+q;B&&delete h[u];var v=z[q];if(b=v.getScope.call(this,p,b))(d=h["class"])&&(h["class"]=(" "+d+" ").replace(" ms-controller ","").trim());else return;var w=this;b.$render=w;this.callbacks.push(function(){v.update.call(w,a,u,p)})}if(k)return a.dom&&a.dom.removeAttribute(m),this.getForBindingByElement(a,b,c,k);/^ms\-/.test(a.nodeName)&&(h.is=a.nodeName);h.is&&(f["ms-widget"]||(f["ms-widget"]="{}"),g=!0);g&&this.bindings.push([a,b,f]);c=a.children;!Ub[a.nodeName]&&c&&c.length&&!ba(f)&&this.scanChildren(c,b,!1)},complete:function(){this.yieldDirectives();this.beforeReady();if(B){var a=this.root;if(B){var b=e.vdom(a,"toDOM");gb(b,a.children)}}for(this.mount=!0;a=this.callbacks.pop();)a();this.optimizeDirectives()},yieldDirectives:function(){for(var a;a=this.bindings.shift();){var b=a[0],c=a[1],d=a[2],f=[];if("nodeValue"in d){f=d.nodeValue.trim().replace(/\n\r?/g,"");d=[];do{a=f.indexOf(u.openTag);a=-1===a?f.length:a;var h=f.slice(0,a);/\S/.test(h)&&d.push(e.quote(e._decode(h)));if(f=f.slice(a+u.openTag.length)){a=f.indexOf(u.closeTag);h=f.slice(0,a);h=e.unescapeHTML(h);if(/\|\s*\w/.test(h)){var g=V(h,"expr");g[1]&&(h=g[1].replace(Bf,g[0]+")"))}Af&&(h="("+h+")");d.push(h);f=f.slice(a+u.closeTag.length)}}while(f.length);f=[{expr:d.join("+"),name:"expr",type:"expr"}]}else if(!("ms-skip"in d))a:{var h=a[0],g={},f=[],k=!1,l=void 0;for(l in d){var n=d[l],m=l.split("-"),q=l in h.props?l:":"+l.slice(3);Zc[m[1]]&&m.splice(1,0,"on");"on"===m[1]&&(m[3]=parseFloat(m[3])||0);var p=m[1];if("controller"!==p&&"important"!==p&&z[p]&&(q={type:p,param:m[2],attrName:q,name:m.join("-"),expr:n,priority:z[p].priority||100*p.charCodeAt(0)},"if"===p&&(k=!0),"on"===p&&(q.priority+=m[3]),!g[q.name]&&(g[q.name]=n,f.push(q),"for"===p))){f=[e.mix(q,a[3])];break a}}f.sort(Ee);if(k)for(d=[],a=0,h=void 0;h=f[a++];)if(d.push(h),"if"===h.type){f=d;break a}}for(d=0;a=f[d++];)if(h=z[a.type],B||!/on|duplex|active|hover/.test(a.type))h.beforeInit&&h.beforeInit.call(a),a=new De(c,a,b,this),this.directives.push(a)}},optimizeDirectives:function(){for(var a=0,b;b=this.directives[a++];)b.callback=z[b.type].update,b.update=Fe,b._isScheduled=!1},update:function(){for(var a=0,b;b=this.directives[a++];)b.update()},dispose:function(){for(var a=this.directives||[],b=0,c;c=a[b++];)c.dispose();for(var d in this)"dispose"!==d&&delete this[d]},getForBinding:function(a,b,c,d){var f=a.nodeValue.replace("ms-for:","").trim();a.nodeValue="ms-for:"+f;var h=vc(c,a),g=h.end,k=e.vdom(h,"toHTML");c.splice(h.start,h.length);a.props={};this.bindings.push([a,b,{"ms-for":f},{begin:a,end:g,expr:f,userCb:d,fragment:k,parentChildren:c}])},getForBindingByElement:function(a,b,c,d){var e=c.indexOf(a),h=a.props;d={nodeName:"#comment",nodeValue:"ms-for:"+d};h.slot&&(d.slot=h.slot,delete h.slot);c.splice(e,1,d,a,{nodeName:"#comment",nodeValue:"ms-for-end:"});this.getForBinding(d,b,c,h["data-for-rendered"])}};var sa,Ie=e.oneObject("onInit,onReady,onViewChange,onDispose,onEnter,onLeave"),vb=[];e.directive("widget",{delay:!0,priority:4,deep:!0,init:function(){var a=this.node;this.cacheVm=!!a.props.cached;if(a.dom&&"#comment"===a.nodeName)var b=a.dom;var c=this.getValue(),d=Ge(c),f=a.props.is||d.is;this.is=f;c=e.components[f];if(!("fragment"in this))if(a.isVoidTag)this.fragment=!1;else{var h=a.children[0];this.fragment=h&&h.nodeValue?h.nodeValue:e.vdom(a.children,"toHTML")}if(c){var g=e.vmodels[d.id||d.$id],h=!1;if(g)this.comVm=d=g,xc(this,d.$render),h=!0;else{"function"===typeof c&&(c=new c(d));d=He(c,d,f);this.readyState=1;Y(d,a,"Init");this.comVm=d;var k=e.scan(c.template,d);d.$render=k;xc(this,k);var l=[],f=[];if(this.fragment||c.soleSlot){g=e.scan("\x3cdiv\x3e"+(this.fragment||"{{##"+c.soleSlot+"}}")+"\x3c/div\x3e",this.fragment?this.vm:d,function(){l=this.root.children});f=g.directives;this.childBoss=g;for(var m in g)delete g[m]}Array.prototype.push.apply(k.directives,f);m=[];var p={};c.soleSlot?m=l:l.forEach(function(a,b){if(a.slot){var c=vc(l,a);c.push(c.end);c.unshift(a);p[a.slot]=c}else a.props&&(c=a.props.slot)&&(delete a.props.slot,Array.isArray(p[c])?p[c].push(a):p[c]=[a])});c.soleSlot?Ac(k.vnodes,m):Bc(k.vnodes,p)}b&&(c=e.vdom(a,"toDOM"),b.parentNode.replaceChild(c,b),d.$element=k.root.dom=c,delete this.reInit);hb(a.dom);d.$element=a.dom;gb(a.dom,a.children);h?Y(d,a,"Enter"):Y(d,a,"Ready")}else this.readyState=0,a.nodeName="#comment",a.nodeValue="unresolved component placeholder",delete a.dom,e.Array.ensure(vb,this)},diff:function(a,b){if(rb.call(this,a,b))return!0},update:function(a,b){switch(this.readyState){case 0:this.reInit&&(this.init(),this.readyState++);break;case 1:this.readyState++;break;default:this.readyState++;var c=this.comVm;e.viewChanging=!0;e.transaction(function(){for(var a in b)c.hasOwnProperty(a)&&(Array.isArray(b[a])?c[a]=b[a].concat():c[a]=b[a])});Y(c,a,"ViewChange");delete e.viewChanging}this.value=e.mix(!0,{},b)},beforeDispose:function(){var a=this.comVm;this.cacheVm?Y(a,this.node,"Leave"):(Y(a,this.node,"Dispose"),a.$hashcode=!1,delete e.vmodels[a.$id],this.innerRender&&this.innerRender.dispose())}});e.components={};e.component=function(a,b){b.extend=Je;e.components[a]=b;for(var c,d=0;c=vb[d];d++)c.is===a&&(vb.splice(d,1),c.reInit=!0,delete c.value,c.update(),d--);return b};return e});