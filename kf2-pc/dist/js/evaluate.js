"use strict";var evaluateVm=avalon.define({$id:"myEvaluate",appId:"",selectedNum:5,evaluationDescs:[],hoverNum:0,finalNum:5,isSelected:1,starChange:function(e){var s=this,a=e.currentTarget,t=$(a),r=t.data("index"),i=$(".star-item");if($.each(i,function(e,s){$(s).removeClass("icon-star-selected"),$(s).removeClass("icon-star-great"),$(s).addClass("icon-star-unselect")}),s.selectedNum=r,r<3)for(var n=0;n<r;n++)$(i[n]).removeClass("icon-star-unselect"),$(i[n]).removeClass("icon-star-great"),$(i[n]).removeClass("icon-star-selected"),$(i[n]).addClass("icon-star-gray");else if(r>2&&r<5)for(var n=0;n<r;n++)$(i[n]).removeClass("icon-star-unselect"),$(i[n]).removeClass("icon-star-great"),$(i[n]).removeClass("icon-star-gray"),$(i[n]).addClass("icon-star-selected");else 5===r&&($(".star-item").removeClass("icon-star-unselect"),$(".star-item").removeClass("icon-star-selected"),$(".star-item").addClass("icon-star-great"))},starSelected:function(e){var s=this,a=e.target,t=$(a),r=t.data("index");s.finalNum=r,5===r?$(".list-issue-ques").hide():$(".list-issue-ques").show()},starOff:function(){var e=this,s=$(".star-item");if(e.selectedNum=e.finalNum,$.each(s,function(e,s){$(s).removeClass("icon-star-selected"),$(s).removeClass("icon-star-great"),$(s).addClass("icon-star-unselect")}),e.finalNum<3)for(var a=0;a<e.selectedNum;a++)$(s[a]).removeClass("icon-star-unselect"),$(s[a]).removeClass("icon-star-great"),$(s[a]).removeClass("icon-star-selected"),$(s[a]).addClass("icon-star-gray");else if(e.finalNum>2&&e.finalNum<5)for(var a=0;a<e.selectedNum;a++)$(s[a]).removeClass("icon-star-unselect"),$(s[a]).removeClass("icon-star-great"),$(s[a]).removeClass("icon-star-gray"),$(s[a]).addClass("icon-star-selected");else for(var a=0;a<e.selectedNum;a++)$(s[a]).removeClass("icon-star-unselect"),$(s[a]).removeClass("icon-star-gray"),$(s[a]).removeClass("icon-star-selected"),$(s[a]).addClass("icon-star-great")},selectProTag:function(){var e=event.target;$(e).toggleClass("active")},submit:function(){var e=this,s=$(".tag-item").length>0,a=[],t="",r=$(".tag-item");s&&$.each(r,function(e,s){var t=$(s).hasClass("active"),r="";t&&(r=$(s).text(),a.push(r))}),t=$(".suggestTxt").val();var i=util.getQueryString("id"),n=util.getQueryString("role_id"),l=util.getQueryString("appId"),o={id:i,roleId:n,appId:l,solved_state:e.isSelected,evaluation_desc:a,satisfied_state:e.finalNum,description:t};api.submitEvaluation(o).then(function(e){dialog.successMsg(e.msg),setTimeout(function(){window.location.href="/pc/my-issue?id="+i},2e3)},function(e){dialog.errorMsg(e.msg)})}});evaluateVm.$watch("onReady",function(){var e=this;api.evaluationSetting().then(function(s){e.evaluationDescs=s.data.evaluation_descs})});