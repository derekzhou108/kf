"use strict";var accountInfoVm=avalon.define({$id:"accountInfo",successCode:1e4,userInfo:util.getStorage("userInfo")||!1,userImg:"",canChoseDate:1,currentModule:"我的资料",crumbPath:"/pc/service",crumbName:"自助服务",accountInfos:{},accountInfo:{icon:"../dist/img/default.png",user_name:"",head_img:"",account:"",nickname:"",gender:"",birthday:"",qq:"",education:"",trade:"",income:"",province:"",city:"",gameList:[]},provinceVal:"",provinceList:util.getProvince(),cityList:[],cityVal:"",genderList:[{text:"男",val:"1"},{text:"女",val:"2"}],cancel:function(){window.open("/pc/service","_self")},provinceSelect:function(c,n){var o=this;o.accountInfo.province=c.value,o.cityList=util.getCity(o.accountInfo.province)},citySelect:function(c,n){this.accountInfo.city=c.value},genderSelect:function(c){this.accountInfo.gender=c.value},choseDate:function(c){console.log(c)},btnOk:function(){var c=this;c.accountInfo.sdkUserId=c.userInfo.user_id||"",api.editAccountInfo(c.accountInfo).then(function(n){c.successCode===n.code?dialog.successMsg("修改成功！"):dialog.errorMsg(n.msg)})}});accountInfoVm.$watch("onReady",function(){var c=this;setTimeout(function(){if(!c.userInfo)return void dialog.errorMsg("账号未登录！");api.getAccountInfo({sdkUserId:c.userInfo.user_id}).then(function(n){c.successCode===n.code?(c.accountInfo=n.data,c.accountInfo.icon=n.data.icon||"../dist/img/default.png",c.canChoseDate=""===c.accountInfo.birthday?1:0,""!==c.accountInfo.province&&(c.cityList=util.getCity(c.accountInfo.province))):dialog.errorMsg(n.msg)}),accountInfoVm.$watch("uploadimgDone",function(n){c.successCode===n.code&&""!==n.data.url&&(c.accountInfo.icon=n.data.url)})},10)});