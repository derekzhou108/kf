"use strict";var bindRoleDoneVm=avalon.define({$id:"bindRoleDone",list:[],item:"",selected:function(e,t){var i=this;this.list.forEach(function(o,n,r){e===n?(r[n].selected=1,i.item=t):r[n].selected=0})},unBind:function(){var e=this;dialog.confirm('确定要解除角色<span style="color:#F87643;margin:0 5px;">"'+e.item.roleName+'" </span>的绑定吗？',function(){var t=util.getStorage("userInfo"),i={appId:e.item.appId,sdkUserId:t.user_id,serverId:e.item.serverId,id:e.item._id};api.roleUnbind(i).then(function(t){var i=util.getStorage("role");i&&i.roleId===e.item.roleId&&util.removeStorage("role"),util.reload()})})},goIssue:function(){util.setStorage("role",this.item.$model);var e=util.getQueryString("to");window.location.href=e?"/pc/issue?type="+e:"/pc/select-issue"},goBind:function(){window.location.href="/pc/bind-role"}});bindRoleDoneVm.$watch("onReady",function(){var e=this,t=util.getStorage("userInfo");t&&api.rolesList({sdkUserId:t.user_id}).then(function(t){1e4===t.code?e.list=t.data.map(function(e){return e.selected=0,e}):dialog.errorMsg(t.msg)})});