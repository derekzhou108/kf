"use strict";var realNameVm=avalon.define({$id:"realName",step:1,user_id:util.getStorage("userInfo").user_id||!1,userInfo:util.getStorage("userInfo")||!1,successCode:1e4,activeIndex:0,activeModule:-1,crumbPath:"/pc/index",crumbName:"首页",currentModule:"帐号安全",realNameInfo:{step:1,loginPW:"",identityNum:"",identityNumAgain:"",realName:"",identityErrorText:"身份证号码不能为空！"},error:{loginPW:!1,identityNum:!1,identityNumAgain:!1,realName:!1},goService:function(module,e){window.location.href="/pc/service-module?moduleName="+encodeURIComponent(module)+"&type="+e},nextStep:function(){var e=this;if(1===e.realNameInfo.step)""!==e.realNameInfo.loginPW?api.checkPW({sdkUserId:e.userInfo.user_id,password:e.realNameInfo.loginPW}).then(function(a){e.successCode===a.code?e.realNameInfo.step++:dialog.errorMsg(a.msg)}):e.error.loginPW=!0;else if(2===e.realNameInfo.step)if(""!==e.realNameInfo.identityNum&&""!==e.realNameInfo.identityNumAgain&&""!==e.realNameInfo.realName){if(e.realNameInfo.identityNum!==e.realNameInfo.identityNumAgain)return e.realNameInfo.identityErrorText="身份证号码不一致！",void(e.error.identityNumAgain=!0);api.bindRealName({sdkUserId:e.userInfo.user_id,card_id:e.realNameInfo.identityNum,real_name:e.realNameInfo.realName}).then(function(a){e.successCode===a.code?(e.realNameInfo.identityNum=e.realNameInfo.identityNum.replace(e.realNameInfo.identityNum.substring(6,11),"*****"),e.realNameInfo.step++):dialog.errorMsg(a.msg)})}else""===e.realNameInfo.identityNum&&(e.error.identityNum=!0),""===e.realNameInfo.identityNumAgain&&(e.error.identityNumAgain=!0),""===e.realNameInfo.realName&&(e.error.realName=!0)},cancel:function(){window.location.href="/pc/account-safe"}});realNameVm.$watch("onReady",function(){});